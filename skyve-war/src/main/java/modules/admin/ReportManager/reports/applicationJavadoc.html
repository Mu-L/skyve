<#macro displayDocument module document>
	<div class="page-break">
		<h2 id="${module.name}-${document.name}" class="section-title">${module.name} - ${document.name}</h2>
		
		<#if document.documentation?? && document.documentation?has_content>
		 <div class="documentation-container">
		    <div class="documentation-title">Documentation:</div>
		    <div class="documentation-description">
		     	${document.documentation!}
		    </div>
		  </div>
		</#if>
		<h3 id="${document.name}-attributes">Attributes</h3>
		<p>The document ${document.name} contains the following attributes:</p> 
		<table id="${document.name}-attributes" class="page-break-avoid">
		    <thead>
		        <tr>
		            <th>Attribute Name</th>
		            <th>Display Name</th>
		            <th>Type</th>
		            <th>Size</th>
		            <th>Required</th>
		            <th>Persistent</th>
		            <th>Description</th>
		            <th>Values</th>
		            <th>Deprecated</th>
		        </tr>
		    </thead>
		    <tbody>
		        <#list document.attributes as attribute>
		            <tr>
		                <td>${attribute.name}</td>
		                <td>${attribute.displayName!}</td>
		                <td>${attribute.type!}</td>
		                <td>${attribute.size!}</td>
		                <td>${attribute.required?c!}</td>
		                <td>${attribute.persistent?c!}</td>
		                <#if attribute.description?has_content>
		               		<td>${attribute.description!}</td>
		                <#else>
		                	<td></td>
		                </#if>
		                <#if attribute.values?? && attribute.values?has_content>
						    <td>
						        <ul>
						            <#list attribute.values as value>
						                <li>${value!}</li>
						            </#list>
						        </ul>
						    </td>
						<#else>
							<td></td>
						</#if>
						<td>${attribute.deprecated?c!}</td>       
		            </tr>
		        </#list>
		    </tbody>
		</table>
		
		<#if document.references?? && document.references?has_content>
		<h3 id="${document.name}-references" >References</h3>
		<p>The document ${document.name} contains the following references:</p>
		<table class="page-break-avoid">
		    <thead>
		        <tr>
		            <th>Reference</th>
		            <th>Type</th>
		            <th>Document</th>
		            <th>Required</th>
		            <th>Deprecated</th>
		        </tr>
		    </thead>
		    <tbody>
		        <#list document.references as reference>
		            <tr>
		                <td>${reference.name}</td>
		                <td>${reference.type!}</td>
		                <td>${reference.document!}</td>
		                <td>${reference.required?c!}</td>
		                <td>${reference.deprecated?c!}</td>
		            </tr>
		        </#list>
		    </tbody>
		</table>
		</#if>
		
		<#if document.conditions?? && document.conditions?has_content>
		<h3 id="${document.name}-conditions" >Conditions</h3>
		<p>The document ${document.name} contains the following conditions:</p> 
		<table class="page-break-avoid">
		    <thead>
		        <tr>
		            <th>Name</th>
		            <th>Documentation</th>
		        </tr>
		    </thead>
		    <tbody>
		        <#list document.conditions as condition>
		            <tr>
		                <td>${condition.name}</td>
		                <td>${condition.documentation!}</td>
		            </tr>
		        </#list>
		    </tbody>
		</table>
		</#if>
		
		<#if document.constraints?? && document.constraints?has_content>
		<h3 id="${document.name}-constraints" >UniqueConstraints</h3>
		<p>The document ${document.name} contains the following constraints:</p> 
			<table class="page-break-avoid">
			    <thead>
			        <tr>
			            <th>Constraint</th>
			            <th>Description</th>
			            <th>Scope</th>
			            <th>References</th>
			        </tr>
			    </thead>
			    <tbody>
			        <#list document.constraints as constraint>
			            <tr>
			                <td>${constraint.name}</td>
			                <td>${constraint.description!}</td>
			                <td>${constraint.scope!}</td>
			                <td>${constraint.references!}</td>
			            </tr>
			        </#list>
			    </tbody>
			</table>
		</#if>
		
		<#if document.actions?? && document.actions?has_content>
		<h3 id="${document.name}-actions" >Actions</h3>
		<p>The document ${document.name} contains the following actions:</p> 
		<ul>
			<#list document.actions as action>
				<li>
					${action.name}
				</li>
			</#list>
		</ul>
		</#if>
	</div>
</#macro>

<#macro displayModule module>
<div>
	<div>
		<h2 id="${module.name}" class="module-header">${module.name}</h2>
	</div>
	
	
	<#if module.queries?? && module.queries?has_content>
	<p>The module ${module.name} contains the following queries:</p> 
		<table class="page-break-avoid">
		    <thead>
		    	<tr>
				    <th class="title" colspan="4">Queries</th>
				</tr>
		        <tr>
		            <th>Query</th>
		            <th>Driving Document</th>
		            <th>Description</th>
		            <th>Documentation</th>
		        </tr>
		    </thead>
		    <tbody>
		    	<#assign row_index = 0>
		        <#list module.queries as query>
		            <tr>
		                <td>${query.name}</td>
		                <td>${query.drivingDocument!}</td>
		                <td>${query.description!}</td>
		                <td>${query.documentation!}</td>
		            </tr>
		             <#assign row_index = row_index + 1>
		        </#list>
		    </tbody>
		</table>
	</#if>
	
	<#if module.roles?? && module.roles?has_content>
	<p>The module ${module.name} contains the following roles:</p>
		<table class="page-break-avoid">
		    <thead>
		    	<tr>
				    <th class="title" colspan="3">Roles</th>
				</tr>
		        <tr>
		            <th>Role</th>
		            <th>Description</th>
		            <th>Documentation</th>
		        </tr>
		    </thead>
		    <tbody>
		    	<#assign row_index = 0>
		        <#list module.roles as role>
		            <tr>
		                <td>${role.name}</td>
		                <td>${role.descrption!}</td>
		                <td>${role.documentation!}</td>
		            </tr>
		            <#assign row_index = row_index + 1>
		        </#list>
		    </tbody>
		</table>
	</#if>
	
	<#if module.jobs?? && module.jobs?has_content>
	<p>The module ${module.name} contains the following jobs:</p>
		<table class="page-break-avoid">
		    <thead>
		    	<tr>
				    <th class="title" colspan="3">Jobs</th>
				</tr>
		        <tr>
		            <th>Name</th>
		            <th>Job</th>
		            <th>Class</th>
		        </tr>
		    </thead>
		    <tbody>
		    	<#assign row_index = 0>
		        <#list module.roles as role>
		            <tr>
		                <td>${job.name}</td>
		                <td>${job.displayName!}</td>
		                <td>${job.className!}</td>
		            </tr>
		            <#assign row_index = row_index + 1>
		        </#list>
		    </tbody>
		</table>
	</#if>
	
	<h2 class="module-header">Documents</h2>
	<p>The module ${module.name} contains the following documents</p> 
	<table class="page-break-avoid">
	    <thead>
	        <tr>
	            <th>Document Name</th>
	            <th>Documentation</th>
	        </tr>
	    </thead>
	    <tbody>
	    	<#assign row_index = 0>
	        <#list module.documents as doc>
	            <tr>
	                <td>${doc.name}</td>
	                <td>${doc.documentation!}</td>
	            </tr>
	            <#assign row_index = row_index + 1>
	        </#list>
	    </tbody>
	</table>
	
	<ul>
		<#list module.documents as document>
			<@displayDocument module document />
		</#list>
	</ul>
</div>
</#macro>


<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>${title}</title>
<#include "/reportBaseStyles.ftlh">
<#assign modules=data.modules>
<style>
body {
	font-family: Arial, sans-serif;
	font-size: 12px;
}

table {
  border-collapse: collapse;
  border-spacing: 0;
}


h1 {
	font-size: 32px;
	color: ${defaultDarkColor!};
}

h2 {
	font-size: 32px;
}

h3 {
	font-size: 18px;
}

.document-documentation{
	padding:5px;
}

.documentation-container {
  display: table;
  background-color: white;
  max-width: 800px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.documentation-title {
  display: table-cell;
  font-weight: bold;
  color: #333;
  width: 100px;
  vertical-align: top;
  padding-right: 10px;
}

.documentation-description {
  display: table-cell;
  color: #555;
  text-align: justify;
}

thead{
	background-color: ${defaultColor!};
}

tbody tr:nth-child(even) {
	background-color: ${defaultLightColor!};
}

thead th.title {
	text-align: center;
}

.page-break td, .page-break th {
	padding-left: 5px;
	max-width: 100px;
}

.module-header {
    padding: 10px;
    text-align: center;
    text-decoration: underline;
    color: ${defaultDarkColor!};
}


.section {
    border: 1px solid var(--shade-dark);
    padding: 10px;
    margin: 10px 0;
}

.section-title {
    color: ${defaultDarkColor!};
    text-align : center;
    padding: 5px;
    font-weight: bold;
}

.toc a {
  text-decoration: none;
}

.toc li > a {
  text-decoration: inherit;
  color: inherit;
  font-family: inherit;
}

.toc li > a:hover {
  color: blue;
}

.toc {
  width: auto;
}

.toc h1 {
  font-size: 24px;
  margin-bottom: 20px;
  text-align: center;
  font-size: 48px;
}

.toc-section-contents-documents > ol > li {
  margin-right: 10px;
  list-style-type: upper-alpha;
  list-style-position: outside;
  
}

.toc-section-contents-documents > ol > li > h4{
  background-color: ${defaultColor!};
  padding-left: 5px;
  color: white;
}

.toc-section-contents-documents > ol > li > h4 a{
  color:inherit;
}

.toc-section-contents-documents ul > li {
  margin-bottom: 5px;
  list-style-type: circle;
  border-bottom: 1px dotted #106FA9;
}

.toc-module-title {
  font-size: 20px;
  margin-bottom: 5px;
  color: #106FA9;
}

.toc-section-contents {
  padding: 0;
  width: 100%;
  font-size: 20px;
}



/* table { width: 100%; border-collapse: collapse; margin-top: 20px; } */
</style>
</head>
<body>
	<header>
		<div class="logo">
			<@image filename="skyve-logo-black.png" alt="Skyve Logo" height="40" />
		</div>
		<div class="company">
			<h2 class="name" style="font-size:18px;">${title}</h2>
		</div>
	</header>
	<div class="toc">
  		<h1>Table of Contents</h1>
  		<div class="toc-section">
		    <div class="toc-section-contents">
		<#list modules as module>
		      <h3 style="text-align: center;">
		        <a class="toc-module-title" href="#${module.name}">${module.name}</a>
		      </h3>
		      
			      <div class="toc-section-contents-documents" style="page-break-after: always">
			      <ol>
		      <#list module.documents as document>
			        <li >
				        <h4>
			                <a class="toc-module-title" href="#${module.name}-${document.name}">${document.name}</a>
			            </h4>
			              <ul>
			              	<#if document.attributes?? && document.attributes?has_content>
			                	<li><a class="toc-module-title" href="#${document.name}-attributes">Attributes</a></li>
			              	</#if>
			              	<#if document.references?? && document.references?has_content>
			                	<li><a class="toc-module-title" href="#${document.name}-references">References</a></li>
			              	</#if>
			              	<#if document.conditions?? && document.conditions?has_content>
			                	<li><a class="toc-module-title" href="#${document.name}-conditions">Conditions</a></li>
			              	</#if>
			              	<#if document.constraints?? && document.constraints?has_content>
			                	<li><a class="toc-module-title" href="#${document.name}-constraints">Constraints</a></li>
			              	</#if>
			              	<#if document.actions?? && document.actions?has_content>
			                	<li><a class="toc-module-title" href="#${document.name}-actions">Actions</a></li>
			              	</#if>
			              </ul>
			      </li>
		      </#list>
		      </ol>
			 </div>
			</#list>
		  </div>
		</div>

</div>

	<#list modules as module>
		<@displayModule module />
	</#list>
</body>
</html>