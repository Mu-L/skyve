<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<document name="Communication" xmlns="http://www.skyve.org/xml/document" xsi:schemaLocation="http://www.skyve.org/xml/document ../../../schemas/document.xsd"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<persistent name="ADM_Communication" />
	<singularAlias>Communication</singularAlias>
	<pluralAlias>Communications</pluralAlias>
	<icon16x16RelativeFilePath>icons/document/communication16.png</icon16x16RelativeFilePath>
	<icon32x32RelativeFilePath>icons/document/communication32.png</icon32x32RelativeFilePath>	
	<bizKey expression="{description}"/>
	<attributes>
		<text name="description" required="true">
			<displayName>Description</displayName>
			<length>250</length>
		</text>
		<association name="tag" type="aggregation">
			<displayName>Tag</displayName>
			<domain>variant</domain>
			<documentName>Tag</documentName>
		</association>
		<text name="moduleName">
			<displayName>Module</displayName>
			<description>Bindings used in the communication address, subject and body will be based on the selected module document.</description>
			<domain>variant</domain>
			<length>500</length>
		</text>
		<text name="documentName">
			<displayName>Document</displayName>
			<description>Bindings used in the communication address, subject and body will be based on the selected module document.</description>
			<domain>dynamic</domain>
			<length>500</length>
		</text>
		<text name="toBinding">
			<displayName>Send to</displayName>
			<description>Provide a binding which contains the email address to send to</description>
			<length>500</length>
		</text>
		<text name="sendTo">
			<displayName>To</displayName>
			<description>The address to send to. Bindings are allowed relative to the above module document.</description>
			<length>250</length>
		</text>
		<text name="sendFrom">
			<displayName>From</displayName>
			<description>The address to send from.</description>
			<length>250</length>
			<validator type="email" />
		</text>
		<text name="subject">
			<displayName>Subject</displayName>
			<description>The subject of the communication. Bindings are allowed relative to the above module document.</description>
			<length>250</length>
		</text>
		<markup name="body">
			<displayName>Body</displayName>
			<description><![CDATA[
			The body of the communication.  
			<p/>
			Bindings are allowed relative to the above module document.
			<p/>
			To include images in the HTML, switch to the Source view, and embed the 64bit encoding from a site like 
			http://www.freeformatter.com/base64-encoder.html
			]]>
			</description>
		</markup>
		<memo name="results" persistent="false">
			<displayName>Results</displayName>
		</memo>
		<content name="attachment">
			<displayName>Attachment</displayName>
		</content>
		<text name="attachmentFileName">
			<displayName>Attachment File Name</displayName>
			<description>The file name for the attachment as it will appear to receivers.</description>
			<length>250</length>
		</text>
		<enum name="actionType" trackChanges="false" persistent="false">
			<displayName>Action</displayName>
			<values>
				<value code="save" description="Save for bulk send"/>
				<value code="send" description="Send Immediately"/>
				<value code="test" description="Test bindings and output"/>
			</values>
		</enum>
		<enum name="formatType">
			<displayName>Format</displayName>
			<values>
				<value code="email"/>
			</values>
		</enum>
		<text name="filePath">
			<displayName>Result Folder</displayName>
			<description>The path (local to the server) where bulk files will be created.</description>
			<length>2000</length>
		</text>
		<boolean name="system">
			<displayName>Used for System communications</displayName>
			<description>System communications can not be deleted unless the system flag is cleared first.</description>
		</boolean>
		<text name="unsubscribeUrl">
			<displayName>UnsubscribeUrl</displayName>
			<length>500</length>
		</text>
		
		<inverse name="subscriptions" >
			<displayName>Subscriptions</displayName>
			<documentName>Subscription</documentName>
			<referenceName>communication</referenceName>
		</inverse>
	</attributes>
	<conditions>
		<condition name="saveAction">
			<![CDATA[ActionType.saveForBulkSend.equals(this.getActionType())]]>
		</condition>
		<condition name="emailType">
			<![CDATA[FormatType.email.equals(this.getFormatType())]]>
		</condition>
		<condition name="locked">
			<![CDATA[isPersisted() && Boolean.TRUE.equals(getSystem())]]>
		</condition>
	</conditions>
</document>