SKYVE={};SKYVE.Util=function(){var a=window.location+"";a=a.substring(0,a.lastIndexOf("/")+1);return{customer:null,v:null,googleMapsV3ApiKey:null,ckEditorConfigFileUrl:null,mapCentre:null,mapZoom:1,CONTEXT_URL:a,loadJS:function(c,e){var b=document.createElement("SCRIPT");b.type="text/javascript";b.src=c;if(e!=null){if(b.readyState){b.onreadystatechange=function(){if(b.readyState=="loaded"||b.readyState=="complete"){b.onreadystatechange=null;e()}}}else{b.onload=e}}var d=document.getElementsByTagName("HEAD");if(d[0]!=null){d[0].appendChild(b)}},geoLocate:function(b){if(navigator.geolocation){$(function(){PrimeFaces.cw("Growl","growl",{id:"growl",widgetVar:"growl",msgs:[{summary:"GeoLocating",detail:"Please wait...",severity:"info"}]})});navigator.geolocation.getCurrentPosition(function(c){$(function(){PrimeFaces.cw("Growl","growl",{id:"growl",widgetVar:"growl",msgs:[{summary:"GeoLocating",detail:"Done",severity:"info"}]})});b("POINT ("+c.coords.longitude+" "+c.coords.latitude+")")},function(c){$(function(){PrimeFaces.cw("Growl","growl",{id:"growl",widgetVar:"growl",msgs:[{summary:"GeoLocating",detail:c.message,severity:"warn"}]})})},{enableHighAccuracy:true})}}}}();SKYVE.GMap=function(){var b=null;var a=function(d){var c=null;if(d=="point"){c=[google.maps.drawing.OverlayType.MARKER]}else{if(d=="line"){c=[google.maps.drawing.OverlayType.POLYLINE]}else{if(d=="polygon"){c=[google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.RECTANGLE]}else{if(d=="pointAndLine"){c=[google.maps.drawing.OverlayType.MARKER,google.maps.drawing.OverlayType.POLYLINE]}else{if(d=="pointAndPolygon"){c=[google.maps.drawing.OverlayType.MARKER,google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.RECTANGLE]}else{if(d=="lineAndPolygon"){c=[google.maps.drawing.OverlayType.POLYLINE,google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.RECTANGLE]}else{c=[google.maps.drawing.OverlayType.MARKER,google.maps.drawing.OverlayType.POLYLINE,google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.RECTANGLE]}}}}}}return c};return{scatter:function(u,D,r,B){if(!b){b=new Wkt.Wkt()}var n=D.items;if(!n){return}if(B){for(var h in u._objects){var k=false;for(var w=0,s=n.length;w<s;w++){if(n[w].bizId===h){k=true;break}}if(!k){var A=u._objects[h];for(var w=0,s=A.overlays.length;w<s;w++){A.overlays[w].setMap(null);A.overlays[w]=null}delete A.overlays;delete u._objects[h]}}}else{for(var h in u._objects){var A=u._objects[h];for(var w=0,s=A.overlays.length;w<s;w++){A.overlays[w].setMap(null);A.overlays[w]=null}delete A.overlays;delete u._objects[h]}}for(var w=0,s=n.length;w<s;w++){var z=n[w];var E=u._objects[z.bizId];if(E){var t=(E.overlays.length==z.features.length);if(t){for(var v=0,q=E.overlays.length;v<q;v++){if(E.overlays[v].geometry!==z.features[v].geometry){t=false;break}}}if(!t){for(var v=0,q=E.overlays.length;v<q;v++){E.overlays[v].setMap(null);E.overlays[v]=null}delete E.overlays;delete u._objects[h];E=null}}if(!E){E={overlays:[]};for(var v=0,q=z.features.length;v<q;v++){var f=z.features[v];try{b.read(f.geometry)}catch(y){if(y.name==="WKTError"){alert(f.geometry+" is invalid WKT.");continue}}var d={editable:f.editable};if(f.strokeColour){d.strokeColor=f.strokeColour}if(f.fillColour){d.fillColor=f.fillColour}if(f.fillOpacity){d.fillOpacity=f.fillOpacity}if(f.iconDynamicImageName){d.icon={url:SKYVE.Util.CONTEXT_URL+"resources?_n="+f.iconDynamicImageName+"&_doc="+D._doc};if(f.iconAnchorX&&f.iconAnchorY){d.icon.anchor=new google.maps.Point(f.iconAnchorX,f.iconAnchorY);d.icon.origin=new google.maps.Point(0,0)}}var x=b.toObject(d);E.overlays.push(x);x.setMap(u.webmap);if(f.zoomable){x.bizId=z.bizId;x.geometry=f.geometry;x.fromTimestamp=z.fromTimestamp;x.toTimestamp=z.toTimestamp;x.mod=z.moduleName;x.doc=z.documentName;x.infoMarkup=z.infoMarkup;google.maps.event.addListener(x,"click",function(e){u.click(this,e)})}}u._objects[z.bizId]=E}}if(r){var g=new google.maps.LatLngBounds();var c=false;for(var p in u._objects){c=true;var E=u._objects[p];var C=E.overlays;for(var w=0,s=C.length;w<s;w++){var x=C[w];if(x.getPath){var o=x.getPath();for(var v=0,q=o.getLength();v<q;v++){g.extend(o.getAt(v))}}else{if(x.getPosition){g.extend(x.getPosition())}}}}if(c){if(g.getNorthEast().equals(g.getSouthWest())){if(u.webmap.getZoom()<15){u.webmap.setZoom(15)}if(x.getPosition!==undefined&&typeof x.getPosition==="function"){u.webmap.setCenter(g.getNorthEast())}}else{u.webmap.fitBounds(g)}}}},centre:function(){if(!b){b=new Wkt.Wkt()}var c=null;if(SKYVE.Util.mapCentre){try{b.read(SKYVE.Util.mapCentre);var f=b.components[0];c=new google.maps.LatLng(f.y,f.x)}catch(d){console.log(SKYVE.Util.mapCentre+" is malformed WKT Point format");SKYVE.Util.mapCentre=null;c=new google.maps.LatLng(0,0)}}else{c=new google.maps.LatLng(0,0)}return c},scatterValue:function(m,g){if(!b){b=new Wkt.Wkt()}if(!g){return}try{b.read(g)}catch(k){if(k.name==="WKTError"){alert("The WKT string is invalid.");return}}var j=b.toObject(m.webmap.defaults);if(b.type==="polygon"||b.type==="linestring"){}else{if(j.setEditable){j.setEditable(false)}}if(Wkt.isArray(j)){for(d in j){if(j.hasOwnProperty(d)&&(!Wkt.isArray(j[d]))){j[d].setMap(m.webmap);m._overlays.push(j[d])}}}else{j.setMap(m.webmap);m._overlays.push(j)}if(j.getBounds!==undefined&&typeof j.getBounds==="function"){m.webmap.fitBounds(j.getBounds())}else{if(j.getPath!==undefined&&typeof j.getPath==="function"){var f=new google.maps.LatLngBounds();var h=j.getPath();for(var d=0,c=h.getLength();d<c;d++){f.extend(h.getAt(d))}m.webmap.fitBounds(f)}else{if(m.webmap.getZoom()<15){m.webmap.setZoom(15)}if(j.getPosition!==undefined&&typeof j.getPosition==="function"){m.webmap.setCenter(j.getPosition())}}}},clear:function(e){for(var d=0,c=e._overlays.length;d<c;d++){e._overlays[d].setMap(null)}e._overlays.length=0},drawingTools:function(d){if(!b){b=new Wkt.Wkt()}var c={editable:true,strokeColor:"#990000",fillColor:"#EEFFCC",fillOpacity:0.6};d.webmap.drawingManager=new google.maps.drawing.DrawingManager({drawingControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM,defaults:c,drawingModes:a(d.drawingTools)},markerOptions:c,polygonOptions:c,polylineOptions:c,rectangleOptions:c});d.webmap.drawingManager.setMap(d.webmap);google.maps.event.addListener(d.webmap.drawingManager,"overlaycomplete",function(f){SKYVE.GMap.clear(d);this.setDrawingMode(null);d._overlays.push(f.overlay);b.fromObject(f.overlay);var e=b.write();d.setFieldValue(e)})},geoLocator:function(d){if(navigator.geolocation){var c=document.createElement("DIV");c.style.backgroundColor="#fff";c.style.border="2px solid #fff";c.style.borderRadius="3px";c.style.boxShadow="0 2px 6px rgba(0,0,0,.3)";c.style.cursor="pointer";c.style.margin="10px";c.style.padding="5px";c.style.textAlign="center";c.title="Click to set you current position from your GPS";c.innerHTML='<i class="fa fa-map-marker fa-2x"></i>';c.index=1;c.addEventListener("click",function(){navigator.geolocation.getCurrentPosition(function(e){SKYVE.GMap.clear(d);d.webmap.setDrawingMode(null);var e={lat:e.coords.latitude,lng:e.coords.longitude};var f=new google.maps.Marker({position:e,map:d.webmap});d.setFieldValue("POINT ("+e.coords.longitude+" "+e.coords.latitude+")");me.webmap.setZoom(15);d.webmap.setCenter(e)},function(e){alert(e.message)},{enableHighAccuracy:true})});d.webmap.geolocator=c;d.webmap.controls[google.maps.ControlPosition.LEFT].push(c)}},setDisabled:function(d,c){if(d.webmap){if(d.webmap.drawingManager){d.webmap.drawingManager.setOptions({drawingControl:(!c)})}if(d.webmap.geolocator){d.webmap.geolocator.style.display=c?"none":"block"}}},refreshControls:function(d){var c=document.createElement("DIV");c.style.backgroundColor="#fff";c.style.border="2px solid #fff";c.style.borderRadius="3px";c.style.boxShadow="0 2px 6px rgba(0,0,0,.3)";c.style.cursor="pointer";c.style.margin="10px";c.style.padding="5px";c.style.textAlign="center";c.title="Click to set you current position from your GPS";c.innerHTML='<input type="number" min="1" max="500" step="1" value="'+d.refreshTime+'" size="3" /><input type="checkbox"'+(d._refreshRequired?" checked":"")+"><label>Refresh</label>";c.index=1;c.children[0].addEventListener("change",function(){d.refreshTime=this.value;if(d._refreshRequired){if(d._intervalId){clearInterval(d._intervalId)}d._intervalId=setInterval(d.rerender.bind(d),d.refreshTime*1000)}});c.children[1].addEventListener("click",function(){d._refreshRequired=this.checked;if(d._intervalId){clearInterval(d._intervalId);d._intervalId=null}if(d._refreshRequired){d.rerender();d._intervalId=setInterval(d.rerender.bind(d),d.refreshTime*1000)}});d.webmap.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(c)}}}();isc.Offline.isOffline=function(){return false};isc.setAutoDraw(false);isc.RPCManager.fetchDataPrompt="Contacting Server...";isc.RPCManager.saveDataPrompt="Contacting Server...";isc.RPCManager.removeDataPrompt="Contacting Server...";isc.RPCManager.handleError=function(a,b){if(isc.isA.String(a.data)){isc.warn(a.data);return false}else{return this.Super("handleError",arguments)}};Date.setShortDisplayFormat("toEuropeanShortDate");Date.setNormalDisplayFormat("toEuropeanShortDate");Date.setInputFormat("DMY");isc.ListGrid.addProperties({recordDrop:function(e,a,c,b){if(this.getID()==b.getID()){var d=this.data.slice();d.slideList(e,c);this.setData(d);this.markForRedraw()}else{this.transferRecords(e,a,this.canReorderRecords?c:null,b)}if(this.recordsDropped){this.recordsDropped(e,c,this,b)}return false},getFilterEditorType:function(c){if(c.filterEditorType!=null){return c.filterEditorType}var b=isc.addProperties({},c,{canEdit:c.canFilter!==false,length:null});if(b._constructor!=null){delete b._constructor}if(c.filterEditorType!=null){b.editorType=c.filterEditorType}isc.addProperties(b,c.filterEditorProperties);var a=isc.DynamicForm.getEditorType(b,this);return a}});var resizeTimerEvent=null;isc.Page.setEvent("resize",function(){if(isc.WindowStack){if(resizeTimerEvent){isc.Timer.clearTimeout(resizeTimerEvent)}resizeTimerEvent=isc.Timer.setTimeout(isc.WindowStack.resize,50)}});isc.DataSource.addSearchOperator({ID:"gEquals",title:"Equals",fieldTypes:["geometry"],valueType:"fieldType",requiresServer:false,condition:function(d,a,e,c,b){return true},compareCriteria:function(a,b){return -1}});isc.DataSource.addSearchOperator({ID:"gDisjoint",title:"Disjoint",fieldTypes:["geometry"],valueType:"fieldType",requiresServer:false,condition:function(d,a,e,c,b){return true},compareCriteria:function(a,b){return -1}});isc.DataSource.addSearchOperator({ID:"gIntersects",title:"Intersects",fieldTypes:["geometry"],valueType:"fieldType",requiresServer:false,condition:function(d,a,e,c,b){return true},compareCriteria:function(a,b){return -1}});isc.DataSource.addSearchOperator({ID:"gTouches",title:"Touches",fieldTypes:["geometry"],valueType:"fieldType",requiresServer:false,compareCriteria:function(a,b){return -1}});isc.DataSource.addSearchOperator({ID:"gCrosses",title:"Crosses",fieldTypes:["geometry"],valueType:"fieldType",requiresServer:false,condition:function(d,a,e,c,b){return true},compareCriteria:function(a,b){return -1}});isc.DataSource.addSearchOperator({ID:"gWithin",title:"Within",fieldTypes:["geometry"],valueType:"fieldType",requiresServer:false,compareCriteria:function(a,b){return -1}});isc.DataSource.addSearchOperator({ID:"gContains",title:"Contains",fieldTypes:["geometry"],valueType:"fieldType",requiresServer:false,condition:function(d,a,e,c,b){return true},compareCriteria:function(a,b){return -1}});isc.DataSource.addSearchOperator({ID:"gOverlaps",title:"Overlaps",fieldTypes:["geometry"],valueType:"fieldType",requiresServer:false,condition:function(d,a,e,c,b){return true},compareCriteria:function(a,b){return -1}});isc.DataSource.addSearchOperator("isNull",["geometry"]);isc.DataSource.addSearchOperator("notNull",["geometry"]);isc.defineClass("BizUtil");isc.BizUtil.addClassProperties({_modules:{},_unusedPickLists:[],PREVIOUS_VALUES_DATA_SOURCE:isc.RestDataSource.create({dataFormat:"json",dataURL:"smartprev",fields:[{name:"value",type:"text"}]})});isc.BizUtil.addClassMethods({_currentView:null,getCurrentView:function(){return isc.BizUtil._currentView},addFilterRequestParams:function(h,e,d){var a=d.gather(false);for(var f=0,c=e.length;f<c;f++){var b=e[f];var g=d.toDisplay(b.value,a);h[b.name]=g}},completeFilterCriteria:function(f,d,e){var j=isc.addProperties({},f);if(j.operator){}else{j=isc.DataSource.convertCriteria(j,"substring")}j={_constructor:"AdvancedCriteria",operator:"and",criteria:[j]};var h=e.gather(false);for(var c=0,b=d.length;c<b;c++){var a=d[c];var g=e.toDisplay(a.value,h);j.criteria.add({fieldName:a.name,operator:a.operator,value:g})}return j},createImageButton:function(b,a,d,c){return isc.IButton.create({width:24,icon:b,iconAlign:"center",showDisabledIcon:a,canHover:true,getHoverHTML:function(){return d},click:c})},createSplitButton:function(g,d,f,e,a,h,b,c){return isc.HLayout.create({height:22,membersMargin:1,members:[isc.IButton.create({height:22,autoFit:true,title:g,icon:d,showDisabledIcon:f,canHover:true,getHoverHTML:function(){return e},click:a}),isc.MenuButton.create({title:"",width:23,alignMenuLeft:false,canHover:true,getHoverHTML:function(){return h},menu:isc.Menu.create({autoDraw:false,showShadow:true,shadowDepth:10,target:b,data:c})})]})},createUploadButton:function(a){return isc.BizUtil.createSplitButton("Upload",null,false,"Upload content",function(){var b=a.form._view.gather(false);var c="contentUpload.xhtml?_n="+a.name.replaceAll("_",".")+"&_c="+b._c;if(a.form._view._b){c+="&_b="+a.form._view._b.replaceAll("_",".")}isc.WindowStack.popup(null,"Upload Content",true,[isc.HTMLPane.create({contentsType:"page",contents:"Loading Page...",contentsURL:c})])},"Other Options",null,[{title:"Clear",icon:"icons/delete.png",click:function(b){a.setValue(null)}}])},getEditView:function(moduleName,documentName,onViewCreated){if(isc.BizUtil._modules[moduleName]){}else{isc.BizUtil._modules[moduleName]={};window[moduleName]={}}var view=null;var documentEntry=isc.BizUtil._modules[moduleName][documentName];if(documentEntry){view=documentEntry._unused.pop();if(view){}else{view=eval(moduleName+".create"+documentName+"()");view._moduleName=moduleName;view._documentName=documentName}isc.BizUtil._modules[moduleName][documentName]._used.push(view);onViewCreated(view)}else{isc.RPCManager.sendRequest({showPrompt:true,evalResult:true,actionURL:SKYVE.Util.CONTEXT_URL+"smartgen?_mod="+moduleName+"&_doc="+documentName,callback:function(rpcResponse,data,rpcRequest){isc.BizUtil._modules[moduleName][documentName]={};isc.BizUtil._modules[moduleName][documentName]._used=[];isc.BizUtil._modules[moduleName][documentName]._unused=[];isc.BizUtil.getEditView(moduleName,documentName,onViewCreated)}})}},relinquishEditView:function(b){var a=isc.BizUtil._modules[b._moduleName][b._documentName];a._used.remove(b);a._unused.push(b)},getPickList:function(d,c,b){var a=isc.BizUtil._unusedPickLists.pop();if(a){}else{a=isc.BizListGrid.create({isPickList:true})}a.setLookup(d,c,b);return a},relinquishPickList:function(a){a.destroy()},createListGrid:function(){return isc.BizListGrid.create({margin:2})},createCalendar:function(){return isc.Calendar.create({width:"100%",height:"100%",scrollToWorkDay:true,data:[]})},createTreeGrid:function(){return isc.BizListGrid.create({margin:2,isTree:true})},createMap:function(){return isc.BizMap.create()},popupFrame:function(c,b,d,a){var e=window.open(c,b,"width="+d+",height="+a+",resizable=yes,scrollbars=no,toolbar=no,location=no,directories=no,status=yes,menubar=no,copyhistory=no");e.focus()},growl:function(b,a,c){PrimeFaces.cw("Growl","growl",{id:"growl",widgetVar:"growl",life:(a?a:6000),sticky:(c?c:false),msgs:b})},onPushMessage:function(f){var a=[];var d=[];var g=false;for(var e=0,c=f.length;e<c;e++){var b=f[e];if(b.type=="g"){a.add({severity:b.severity,summary:b.message})}else{if(b.type=="m"){if(b.severity!="info"){g=true}d.add(b.message)}else{if(b.type=="r"){var h=isc.BizUtil.getCurrentView();if(h&&h.rerender){h.rerender()}}else{if(b.type=="j"){window[b.method](b.argument)}}}}}if(a.length>0){isc.BizUtil.growl(a)}if(d.length>0){var n=(d.length>1);var j=n?"<ul>":"";for(var e=0,c=d.length;e<c;e++){var k=d[e];if(n){j+="<li>"}j+=k;if(n){j+="</li>"}}if(n){j+="</ul>"}if(g){isc.warn(j)}else{isc.say(j)}}}});isc.RPCManager.credentialsURL="login";isc.RPCManager.addClassMethods({loginRequired:function(c,b,d){this.transactionToResend=c;if(!this.loginWindow){var a=[{name:"loginFailure",type:"blurb",cellStyle:"formCellError",defaultValue:"Invalid username or password",colSpan:2,visible:false}];if(!SKYVE.Util.customer){a.add({name:"customer",title:"Customer",titleOrientation:"left",keyPress:function(g,f,e){if(e=="Enter"){f.focusInItem("username");return false}},required:true})}a.addAll([{name:"username",title:"Username",titleOrientation:"left",keyPress:function(g,f,e){if(e=="Enter"){f.focusInItem("password");return false}},required:true},{name:"password",title:"Password",titleOrientation:"left",type:"password",keyPress:function(g,f,e){if(e=="Enter"){f.loginWindow.doLogin();return false}},required:true},{type:"spacer",colSpan:2,height:5},{type:"button",title:"Sign In",click:"form.loginWindow.doLogin()",startRow:true,colSpan:2,width:130,align:"center"}]);this.loginForm=isc.DynamicForm.create({numCols:2,colWidths:[75,"*"],fields:a});this.loginWindow=isc.LoginWindow.create({headerIconDefaults:{src:"../images/window/skyve_fav.png",width:16,height:16},title:"Session expired - please sign in",autoCenter:true,autoSize:true,showCloseButton:false,showMinimizeButton:false,isModal:true,loginForm:this.loginForm,items:[isc.VLayout.create({width:130,height:SKYVE.Util.customer?90:120,layoutMargin:10,members:[this.loginForm]})]});this.loginForm.loginWindow=this.loginWindow}if(!(this.loginWindow.isVisible()&&this.loginWindow.isDrawn())){this.loginForm.clearValues();this.loginForm.delayCall("focusInItem",SKYVE.Util.customer?["username"]:["customer"])}this.loginWindow.show();this.loginWindow.bringToFront()}});isc.defineClass("LoginWindow","Window").addProperties({doLogin:function(){if(this.loginForm.validate(false)){isc.RPCManager.sendRequest({containsCredentials:true,actionURL:isc.RPCManager.credentialsURL,useSimpleHttp:true,showPrompt:false,params:{username:(SKYVE.Util.customer?SKYVE.Util.customer:this.loginForm.getValue("customer"))+"/"+this.loginForm.getValue("username"),password:this.loginForm.getValue("password")},callback:this.getID()+".loginReply(rpcResponse)"})}},loginReply:function(b){this.loginForm.clearValues();var a=b.status;if(a==isc.RPCResponse.STATUS_SUCCESS){this.loginForm.hideItem("loginFailure");this.hide();isc.RPCManager.delayCall("resendTransaction",[this.transactionToResend]);delete this.transactionsToResubmit}else{if(a==isc.RPCResponse.STATUS_LOGIN_INCORRECT){this.loginForm.showItem("loginFailure")}else{if(a==isc.RPCResponse.STATUS_MAX_LOGIN_ATTEMPTS_EXCEEDED){isc.warn("Max login attempts exceeded.")}}}this.loginForm.focusInItem(SKYVE.Util.customer?"username":"customer")}});isc.addMethods(Date.prototype,{toDD_MM_YYYY:function(){return this.getDate().stringify()+"/"+(this.getMonth()+1).stringify()+"/"+this.getFullYear()},toDD_MMM_YYYY:function(){var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return this.getDate().stringify()+"-"+a[this.getMonth()]+"-"+this.getFullYear()},toDD_MM_YYYY_HH_MI:function(){return this.toDD_MM_YYYY()+" "+this.getHours().stringify()+":"+this.getMinutes().stringify()},toDD_MMM_YYYY_HH_MI:function(){return this.toDD_MMM_YYYY()+" "+this.getHours().stringify()+":"+this.getMinutes().stringify()},toDD_MM_YYYY_HH_MI_SS:function(){return this.toDD_MM_YYYY_HH_MI()+":"+this.getSeconds().stringify()},toDD_MMM_YYYY_HH_MI_SS:function(){return this.toDD_MMM_YYYY_HH_MI()+":"+this.getSeconds().stringify()}});isc.ClassFactory.defineClass("BizDateItem","DateItem");isc.BizDateItem.addClassMethods({parseInput:function(d){if(isc.isA.Date(d)){return d}if(d){d=d.trim();var c=/^\d?\d[^A-Za-z0-9]([A-Za-z]+).*$/.exec(d);if(c){var e=c[1];var b=e.toLowerCase();if(b.startsWith("jan")){d=d.replaceAll(e,"1")}else{if(b.startsWith("feb")){d=d.replaceAll(e,"2")}else{if(b.startsWith("mar")){d=d.replaceAll(e,"3")}else{if(b.startsWith("apr")){d=d.replaceAll(e,"4")}else{if(b.startsWith("may")){d=d.replaceAll(e,"5")}else{if(b.startsWith("jun")){d=d.replaceAll(e,"6")}else{if(b.startsWith("jul")){d=d.replaceAll(e,"7")}else{if(b.startsWith("aug")){d=d.replaceAll(e,"8")}else{if(b.startsWith("sep")){d=d.replaceAll(e,"9")}else{if(b.startsWith("oct")){d=d.replaceAll(e,"10")}else{if(b.startsWith("nov")){d=d.replaceAll(e,"11")}else{if(b.startsWith("dec")){d=d.replaceAll(e,"12")}}}}}}}}}}}}}var a=Date.parseSchemaDate(d);if(a){}else{a=Date.parseInput(d,"DMY",50,true);if(a){}else{if(/^\d?\d[^A-Za-z0-9]\d?\d$/.test(d)){a=Date.parseInput(d+" "+Date.create().getFullYear(),"DMY",50,true)}}}return a}else{return null}},format:function(value,format){if(!isc.isA.Date(value)){return value}return eval("value."+format+"()")}});isc.BizDateItem.addProperties({enforceDate:true,changeOnBlur:true,changeOnKeypress:false,width:100,useTextField:true,showHint:true,showHintInField:true,hint:"DD MM(M) YY(YY)",textFieldProperties:{selectOnFocus:true},showPickerTimeItem:false,inputFormat:function(a){return isc.BizDateItem.parseInput(a)},displayFormat:"toDD_MM_YYYY"});isc.BizDateItem.addMethods({mapValueToDisplay:function(a){if(a==null){return isc.emptyString}if(!isc.isA.Date(a)){a=isc.BizDateItem.parseInput(a)}return isc.BizDateItem.format(a,this.displayFormat)},mapDisplayToValue:function(a){if(isc.isAn.emptyString(a)){a=null}else{a=isc.BizDateItem.parseInput(a)}return a},updateValue:function(){this.Super("updateValue",arguments);this.setElementValue(this.mapValueToDisplay(this.getValue()))},setValue:function(a){if(isc.isA.String(a)){a=isc.BizDateItem.parseInput(a)}return this.Super("setValue",[a])}});isc.SimpleType.create({name:"bizDate",inheritsFrom:"date",editorType:"BizDateItem",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toDD_MM_YYYY")}});isc.SimpleType.create({name:"DD_MM_YYYY",inheritsFrom:"bizDate"});isc.ClassFactory.defineClass("DD_MMM_YYYY_Item","BizDateItem");isc.DD_MMM_YYYY_Item.addProperties({displayFormat:"toDD_MMM_YYYY"});isc.SimpleType.create({name:"DD_MMM_YYYY",inheritsFrom:"bizDate",editorType:"DD_MMM_YYYY_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toDD_MMM_YYYY")}});isc.ClassFactory.defineClass("BizDateTimeItem","DateTimeItem");isc.BizDateTimeItem.addProperties({enforceDate:true,changeOnBlur:true,changeOnKeypress:false,width:200,useTextField:true,showHint:true,showHintInField:true,hint:"DD MM(M) YY(YY) HH(24):MI",textFieldProperties:{selectOnFocus:true},showPickerTimeItem:true,pickerTimeItemProperties:{showSecondItem:false,use24HourTime:false},inputFormat:function(a){return isc.BizDateItem.parseInput(a)},displayFormat:"toDD_MM_YYYY_HH_MI"});isc.BizDateTimeItem.addMethods({mapValueToDisplay:function(a){if(a==null){return isc.emptyString}if(!isc.isA.Date(a)){a=isc.BizDateItem.parseInput(a)}return isc.BizDateItem.format(a,this.displayFormat)},mapDisplayToValue:function(a){if(isc.isAn.emptyString(a)){a=null}else{a=isc.BizDateItem.parseInput(a)}return a},updateValue:function(){this.Super("updateValue",arguments);this.setElementValue(this.mapValueToDisplay(this.getValue()))},setValue:function(a){if(isc.isA.String(a)){a=isc.BizDateItem.parseInput(a)}return this.Super("setValue",[a])}});isc.SimpleType.create({name:"bizDateTime",inheritsFrom:"dateTime",editorType:"BizDateTimeItem",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toDD_MM_YYYY_HH_MI")}});isc.SimpleType.create({name:"DD_MM_YYYY_HH_MI",inheritsFrom:"bizDateTime"});isc.ClassFactory.defineClass("DD_MM_YYYY_HH24_MI_Item","BizDateTimeItem");isc.DD_MM_YYYY_HH24_MI_Item.addProperties({displayFormat:"toDD_MM_YYYY_HH_MI",pickerTimeItemProperties:{showSecondItem:false,use24HourTime:true}});isc.SimpleType.create({name:"DD_MM_YYYY_HH24_MI",inheritsFrom:"bizDateTime",editorType:"DD_MM_YYYY_HH24_MI_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toDD_MM_YYYY_HH_MI")}});isc.ClassFactory.defineClass("DD_MMM_YYYY_HH_MI_Item","BizDateTimeItem");isc.DD_MMM_YYYY_HH_MI_Item.addProperties({displayFormat:"toDD_MMM_YYYY_HH_MI",pickerTimeItemProperties:{showSecondItem:false,use24HourTime:false}});isc.SimpleType.create({name:"DD_MMM_YYYY_HH_MI",inheritsFrom:"bizDateTime",editorType:"DD_MMM_YYYY_HH_MI_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toDD_MMM_YYYY_HH_MI")}});isc.ClassFactory.defineClass("DD_MMM_YYYY_HH24_MI_Item","BizDateTimeItem");isc.DD_MMM_YYYY_HH24_MI_Item.addProperties({displayFormat:"toDD_MMM_YYYY_HH_MI",pickerTimeItemProperties:{showSecondItem:false,use24HourTime:true}});isc.SimpleType.create({name:"DD_MMM_YYYY_HH24_MI",inheritsFrom:"bizDateTime",editorType:"DD_MMM_YYYY_HH24_MI_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toDD_MMM_YYYY_HH_MI")}});isc.ClassFactory.defineClass("DD_MM_YYYY_HH_MI_SS_Item","BizDateTimeItem");isc.DD_MM_YYYY_HH_MI_SS_Item.addProperties({displayFormat:"toDD_MM_YYYY_HH_MI_SS",hint:"DD MM(M) YY(YY) HH(24):MI(:SS)",pickerTimeItemProperties:{showSecondItem:true,use24HourTime:false}});isc.SimpleType.create({name:"DD_MM_YYYY_HH_MI_SS",inheritsFrom:"bizDateTime",editorType:"DD_MM_YYYY_HH_MI_SS_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toDD_MM_YYYY_HH_MI_SS")}});isc.ClassFactory.defineClass("DD_MM_YYYY_HH24_MI_SS_Item","BizDateTimeItem");isc.DD_MM_YYYY_HH24_MI_SS_Item.addProperties({displayFormat:"toDD_MM_YYYY_HH_MI_SS",hint:"DD MM(M) YY(YY) HH(24):MI(:SS)",pickerTimeItemProperties:{showSecondItem:true,use24HourTime:true}});isc.SimpleType.create({name:"DD_MM_YYYY_HH24_MI_SS",inheritsFrom:"bizDateTime",editorType:"DD_MM_YYYY_HH24_MI_SS_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toDD_MM_YYYY_HH_MI_SS")}});isc.ClassFactory.defineClass("DD_MMM_YYYY_HH_MI_SS_Item","BizDateTimeItem");isc.DD_MMM_YYYY_HH_MI_SS_Item.addProperties({displayFormat:"toDD_MMM_YYYY_HH_MI_SS",hint:"DD MM(M) YY(YY) HH(24):MI(:SS)",pickerTimeItemProperties:{showSecondItem:true,use24HourTime:false}});isc.SimpleType.create({name:"DD_MMM_YYYY_HH_MI_SS",inheritsFrom:"bizDateTime",editorType:"DD_MMM_YYYY_HH_MI_SS_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toDD_MMM_YYYY_HH_MI_SS")}});isc.ClassFactory.defineClass("DD_MMM_YYYY_HH24_MI_SS_Item","BizDateTimeItem");isc.DD_MMM_YYYY_HH24_MI_SS_Item.addProperties({displayFormat:"toDD_MMM_YYYY_HH_MI_SS",hint:"DD MM(M) YY(YY) HH(24):MI(:SS)",pickerTimeItemProperties:{showSecondItem:true,use24HourTime:true}});isc.SimpleType.create({name:"DD_MMM_YYYY_HH24_MI_SS",inheritsFrom:"bizDateTime",editorType:"DD_MMM_YYYY_HH24_MI_SS_Item",shortDisplayFormatter:function(c,d,b,a){return isc.BizDateItem.format(c,"toDD_MMM_YYYY_HH_MI_SS")}});isc.TimeItem.addMethods({init:function(){this.Super("init",arguments)}});isc.ClassFactory.defineClass("BizTimeItem","TimeItem");isc.BizTimeItem.addProperties({useTextField:true,use24HourTime:false,showHint:true,showHintInField:true,hint:"HH:MI am/pm",textFieldProperties:{selectOnFocus:true},displayFormat:"toShortTime",timeFormatter:"toShortTime"});isc.BizTimeItem.addMethods({setValue:function(a){if(isc.isA.String(a)){a=isc.Time.parseInput(a)}return this.Super("setValue",[a])},hasAdvancedCriteria:function(){return false}});isc.SimpleType.create({name:"bizTime",inheritsFrom:"time",editorType:"BizTimeItem",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.Time.toShortTime(c,"toShortTime",true)}});isc.SimpleType.create({name:"HH_MI",inheritsFrom:"bizTime"});isc.ClassFactory.defineClass("HH_MI_SS_Item","BizTimeItem");isc.HH_MI_SS_Item.addProperties({use24HourTime:false,hint:"HH:MI:SS am/pm",displayFormat:"toTime",timeFormatter:"toTime"});isc.SimpleType.create({name:"HH_MI_SS",inheritsFrom:"bizTime",editorType:"HH_MI_SS_Item",shortDisplayFormatter:function(c,d,b,a){return isc.Time.toTime(c,"toTime",true)}});isc.ClassFactory.defineClass("HH24_MI_Item","BizTimeItem");isc.HH24_MI_Item.addProperties({use24HourTime:true,hint:"HH24:MI",displayFormat:"toShortPadded24HourTime",timeFormatter:"toShortPadded24HourTime"});isc.SimpleType.create({name:"HH24_MI",inheritsFrom:"bizTime",editorType:"HH24_MI_Item",shortDisplayFormatter:function(c,d,b,a){return isc.Time.toShortTime(c,"toShortPadded24HourTime",true)}});isc.ClassFactory.defineClass("HH24_MI_SS_Item","BizTimeItem");isc.HH24_MI_SS_Item.addProperties({use24HourTime:true,hint:"HH24:MI:SS",displayFormat:"toPadded24HourTime",timeFormatter:"toPadded24HourTime"});isc.SimpleType.create({name:"HH24_MI_SS",inheritsFrom:"bizTime",editorType:"HH24_MI_SS_Item",shortDisplayFormatter:function(c,d,b,a){return isc.Time.toTime(c,"toPadded24HourTime",true)}});isc.ClassFactory.defineClass("BizDecimal2Item","TextItem");isc.BizDecimal2Item.addClassMethods({parseInput:function(b){if(isc.isA.Number(b)){return b}if(b){b=b.toString().trim(" ").replace(/\$|\,/g,"");if(isNaN(b)){return""}else{var a=parseFloat(b);if(a>=1000000000000000000){a=""}return a}}else{return""}},format:function(b,a){if(!isc.isA.Number(b)){return b}return b.toLocalizedString(a,".",",","-")}});isc.BizDecimal2Item.addProperties({changeOnBlur:true,changeOnKeypress:false,width:100,showHint:false,selectOnFocus:true,decimalPlaces:2});isc.BizDecimal2Item.addMethods({mapValueToDisplay:function(a){if(a==null){return isc.emptyString}if(!isc.isA.Number(a)){a=isc.BizDecimal2Item.parseInput(a)}return isc.BizDecimal2Item.format(a,this.decimalPlaces)},mapDisplayToValue:function(a){if(isc.isAn.emptyString(a)){a=null}else{a=isc.BizDecimal2Item.parseInput(a)}return a},updateValue:function(){this.Super("updateValue",arguments);this.setElementValue(this.mapValueToDisplay(this.getValue()))},setValue:function(a){if(isc.isA.String(a)){a=isc.BizDecimal2Item.parseInput(a)}return this.Super("setValue",[a])}});isc.SimpleType.create({name:"bizDecimal2",inheritsFrom:"float",editorType:"BizDecimal2Item",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizDecimal2Item.format(c,2)},validators:[{type:"custom",clientOnly:true,condition:"(value == null) || isc.isA.Number(value)"}]});isc.ClassFactory.defineClass("BizDecimal5Item","BizDecimal2Item");isc.BizDecimal5Item.addProperties({decimalPlaces:5});isc.SimpleType.create({name:"bizDecimal5",inheritsFrom:"float",editorType:"BizDecimal5Item",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,value)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizDecimal2Item.format(c,5)},validators:[{type:"custom",clientOnly:true,condition:"(value == null) || isc.isA.Number(value)"}]});isc.ClassFactory.defineClass("BizDecimal10Item","BizDecimal2Item");isc.BizDecimal10Item.addProperties({decimalPlaces:10});isc.SimpleType.create({name:"bizDecimal10",inheritsFrom:"float",editorType:"BizDecimal10Item",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizDecimal2Item.format(c,10)},validators:[{type:"custom",clientOnly:true,condition:"(value == null) || isc.isA.Number(value)"}]});isc.ClassFactory.defineClass("BizDecimal0Item","BizDecimal2Item");isc.BizDecimal0Item.addProperties({decimalPlaces:0});isc.SimpleType.create({name:"bizDecimal0",inheritsFrom:"float",editorType:"BizDecimal0Item",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizDecimal2Item.format(c,0)},validators:[{type:"custom",clientOnly:true,condition:"(value == null) || isc.isA.Number(value)"}]});isc.ClassFactory.defineClass("BizDecimal1Item","BizDecimal2Item");isc.BizDecimal1Item.addProperties({decimalPlaces:1});isc.SimpleType.create({name:"bizDecimal1",inheritsFrom:"float",editorType:"BizDecimal1Item",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizDecimal2Item.format(c,1)},validators:[{type:"custom",clientOnly:true,condition:"(value == null) || isc.isA.Number(value)"}]});isc.ClassFactory.defineClass("BizDollarsAndCentsItem","BizDecimal2Item");isc.BizDollarsAndCentsItem.addProperties({showHint:true,showHintInField:true,hint:"(+/-)$$$$$.cc"});isc.SimpleType.create({name:"bizDollarsAndCents",inheritsFrom:"float",editorType:"BizDollarsAndCentsItem",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizDollarsAndCentsItem.format(c,2)},validators:[{type:"custom",clientOnly:true,condition:"(value == null) || isc.isA.Number(value)"}]});isc.ClassFactory.defineClass("BizIntegerPercentageItem","TextItem");isc.BizIntegerPercentageItem.addClassMethods({parseInput:function(b){if(isc.isA.Number(b)){return b}if(b){b=b.toString().trim(" ").trim("%");if(isNaN(b)){return null}else{var a=Math.round(parseFloat(b))/100;if(a>=1000000000000000000){a=null}return a}}else{return null}},format:function(a){if(!isc.isA.Number(a)){return a}return(a*100).toLocalizedString(0,".",",","-")+"%"}});isc.BizIntegerPercentageItem.addProperties({changeOnBlur:true,changeOnKeypress:false,width:100,showHint:true,showHintInField:true,hint:"(+/-)99999",selectOnFocus:true});isc.BizIntegerPercentageItem.addMethods({mapValueToDisplay:function(a){if(a==null){return isc.emptyString}if(!isc.isA.Number(a)){a=isc.BizIntegerPercentageItem.parseInput(a)}return isc.BizIntegerPercentageItem.format(a)},mapDisplayToValue:function(a){if(isc.isAn.emptyString(a)){a=null}else{a=isc.BizIntegerPercentageItem.parseInput(a)}return a},updateValue:function(){this.Super("updateValue",arguments);this.setElementValue(this.mapValueToDisplay(this.getValue()))},setValue:function(a){if(isc.isA.String(a)){a=isc.BizIntegerPercentageItem.parseInput(a)}return this.Super("setValue",[a])}});isc.SimpleType.create({name:"bizIntegerPercentage",inheritsFrom:"integer",editorType:"BizIntegerPercentageItem",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizIntegerPercentageItem.format(c)},validators:[{type:"custom",clientOnly:true,condition:"(value == null) || isc.isA.Number(value)"}]});isc.ClassFactory.defineClass("BizSimplePercentageItem","BizIntegerPercentageItem");isc.BizSimplePercentageItem.addClassMethods({parseInput:function(b){if(isc.isA.Number(b)){return b}if(b){b=b.toString().trim(" ").trim("%");if(isNaN(b)){return null}else{var a=Math.round(parseFloat(b));if(a>=1000000000000000000){a=null}return a}}else{return null}},format:function(a){if(!isc.isA.Number(a)){return a}return a.toLocalizedString(0,".",",","-")+"%"}});isc.BizSimplePercentageItem.addMethods({mapValueToDisplay:function(a){if(a==null){return isc.emptyString}if(!isc.isA.Number(a)){a=isc.BizSimplePercentageItem.parseInput(a)}return isc.BizSimplePercentageItem.format(a)},mapDisplayToValue:function(a){if(isc.isAn.emptyString(a)){a=null}else{a=isc.BizSimplePercentageItem.parseInput(a)}return a},setValue:function(a){if(isc.isA.String(a)){a=isc.BizSimplePercentageItem.parseInput(a)}return this.Super("setValue",[a])}});isc.SimpleType.create({name:"bizSimplePercentage",inheritsFrom:"float",editorType:"BizSimplePercentageItem",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizSimplePercentageItem.format(c)},validators:[{type:"custom",clientOnly:true,condition:"(value == null) || isc.isA.Number(value)"}]});isc.ClassFactory.defineClass("BizIntegerSeparatorItem","TextItem");isc.BizIntegerSeparatorItem.addClassMethods({parseInput:function(b){if(isc.isA.Number(b)){return b}if(b){b=b.toString().replace(",","").replace(",","").replace(",","").replace(",","").replace(",","").replace(",","").trim(" ");if(isNaN(b)){return null}else{var a=Math.round(parseFloat(b));if(a>=1000000000000000000){a=null}return a}}else{return null}},format:function(a){if(!isc.isA.Number(a)){return a}return(a).toLocalizedString(0,".",",","-")}});isc.BizIntegerSeparatorItem.addProperties({changeOnBlur:true,changeOnKeypress:false,width:100,showHint:true,showHintInField:true,hint:"(+/-)99,999,999",selectOnFocus:true});isc.BizIntegerSeparatorItem.addMethods({mapValueToDisplay:function(a){if(a==null){return isc.emptyString}if(!isc.isA.Number(a)){a=isc.BizIntegerSeparatorItem.parseInput(a)}return isc.BizIntegerSeparatorItem.format(a)},mapDisplayToValue:function(a){if(isc.isAn.emptyString(a)){a=null}else{a=isc.BizIntegerSeparatorItem.parseInput(a)}return a},updateValue:function(){this.Super("updateValue",arguments);this.setElementValue(this.mapValueToDisplay(this.getValue()))},setValue:function(a){if(isc.isA.String(a)){a=isc.BizIntegerSeparatorItem.parseInput(a)}return this.Super("setValue",[a])}});isc.SimpleType.create({name:"bizIntegerSeparator",inheritsFrom:"integer",editorType:"BizIntegerSeparatorItem",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizIntegerSeparatorItem.format(c)},validators:[{type:"custom",clientOnly:true,condition:"(value == null) || isc.isA.Number(value)"}]});isc.ClassFactory.defineClass("BizTwoDecimalPlacesPercentageItem","BizIntegerPercentageItem");isc.BizTwoDecimalPlacesPercentageItem.addClassMethods({parseInput:function(b){if(isc.isA.Number(b)){return b}if(b){b=b.toString().trim(" ").trim("%");if(isNaN(b)){return null}else{var a=Math.round(parseFloat(b)*100)/10000;if(a>=1000000000000000000){a=null}return a}}else{return null}},format:function(a){if(!isc.isA.Number(a)){return a}return(a*100).toLocalizedString(2,".",",","-")+"%"}});isc.BizTwoDecimalPlacesPercentageItem.addProperties({hint:"(+/-)99999.99"});isc.BizTwoDecimalPlacesPercentageItem.addMethods({mapValueToDisplay:function(a){if(a==null){return isc.emptyString}if(!isc.isA.Number(a)){a=isc.BizTwoDecimalPlacesPercentageItem.parseInput(a)}return isc.BizTwoDecimalPlacesPercentageItem.format(a)},mapDisplayToValue:function(a){if(isc.isAn.emptyString(a)){a=null}else{a=isc.BizTwoDecimalPlacesPercentageItem.parseInput(a)}return a},setValue:function(a){if(isc.isA.String(a)){a=isc.BizTwoDecimalPlacesPercentageItem.parseInput(a)}return this.Super("setValue",[a])}});isc.SimpleType.create({name:"bizTwoDecimalPlacesPercentage",inheritsFrom:"float",editorType:"BizTwoDecimalPlacesPercentageItem",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizTwoDecimalPlacesPercentageItem.format(c)},validators:[{type:"custom",clientOnly:true,condition:"(value == null) || isc.isA.Number(value)"}]});isc.ClassFactory.defineClass("BizTimeDurationItem","TextItem");isc.BizTimeDurationItem.addClassMethods({parseInput:function(e){if(isc.isA.Number(e)){return e}if(e){var c=/^\s*\s*([-+]?\d+)\s*\.\s*(\d?\d)?\s*$/.exec(e);if(c){var a=parseFloat(c[1]+"."+(c[2]|0));if(a>=1000000000000000000){a=null}return a}c=/^\s*\s*([-+]?\d+)\s*\D?\s*(\d?\d)?\s*$/.exec(e);if(c){var b=parseInt(c[1]|0,10);var d=Math.min(parseInt(c[2]|0,10),59);if(b>=0){return b+(d/60)}return b-(d/60)}else{return null}}else{return null}},format:function(b){if(!isc.isA.Number(b)){return b}var d;var a;if(b>=0){a=Math.floor(b);d=b-a}else{a=Math.ceil(b);d=Math.abs(b-a)}var c=Math.round(d*60).toString();if(c=="60"){a=(b>=0)?(a+1):(a-1);c="00"}else{if(c.length==1){c="0"+c}}return a+":"+c}});isc.BizTimeDurationItem.addProperties({changeOnBlur:true,changeOnKeypress:false,width:100,showHint:true,showHintInField:true,hint:"(+/-)HHH:MM",selectOnFocus:true});isc.BizTimeDurationItem.addMethods({mapValueToDisplay:function(a){if(a==null){return isc.emptyString}if(!isc.isA.Number(a)){a=isc.BizTimeDurationItem.parseInput(a)}return isc.BizTimeDurationItem.format(a)},mapDisplayToValue:function(a){if(isc.isAn.emptyString(a)){a=null}else{a=isc.BizTimeDurationItem.parseInput(a)}return a},updateValue:function(){this.Super("updateValue",arguments);this.setElementValue(this.mapValueToDisplay(this.getValue()))},setValue:function(a){if(isc.isA.String(a)){a=isc.BizTimeDurationItem.parseInput(a)}return this.Super("setValue",[a])}});isc.SimpleType.create({name:"bizTimeDuration",inheritsFrom:"float",editorType:"BizTimeDurationItem",editFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},normalDisplayFormatter:function(c,d,b,a){return this.shortDisplayFormatter(c,d,b,a)},shortDisplayFormatter:function(c,d,b,a){return isc.BizTimeDurationItem.format(c)},validators:[{type:"custom",clientOnly:true,condition:"(value == null) || isc.isA.Number(value)"}]});isc.ClassFactory.defineClass("BizContentLinkItem",isc.CanvasItem);isc.BizContentLinkItem.addProperties({height:25,width:"*",rowSpan:"*",endRow:false,startRow:false,canFocus:true,shouldSaveValue:true});isc.BizContentLinkItem.addMethods({init:function(a){this._link=isc.HTMLFlow.create({contents:"Empty",width:"100%"});if(a.editable){this.canvas=isc.HLayout.create({defaultLayoutAlign:"center",members:[this._link,isc.LayoutSpacer.create({width:3}),isc.BizUtil.createUploadButton(this)]})}else{this.canvas=isc.HLayout.create({defaultLayoutAlign:"center",members:[this._link]})}this.Super("init",arguments)},setValue:function(b){if((this.canvas!=null)&&(!this.userSetValue)){if(b){var a=SKYVE.Util.CONTEXT_URL+"content?_n="+b+"&_doc="+this.form._view._mod+"."+this.form._view._doc+"&_b="+this.name.replaceAll("_",".");this._link.setContents('<div style="line-height:25px;vertical-align:middle;">'+this.canvas.linkHTML(a,(this.value?this.value:"Content"),"_blank")+"</div>")}else{this._link.setContents('<div style="line-height:25px;vertical-align:middle;">&lt;Empty&gt;</div>')}}return this.Super("setValue",[b])}});isc.SimpleType.create({inheritsFrom:"canvas",name:"bizContentLink",editorType:"BizContentLinkItem"});isc.ClassFactory.defineClass("BizContentImageItem",isc.CanvasItem);isc.BizContentImageItem.addProperties({width:"*",rowSpan:"*",endRow:false,startRow:false,canFocus:true,shouldSaveValue:true});isc.BizContentImageItem.addMethods({init:function(a){this._img=isc.Img.create({width:(a.width?a.width:"100%"),height:(a.height?a.height:"100%"),imageType:"center",isGroup:true,styleName:"bizhubRoundedBorder",groupBorderCSS:"1px solid #bfbfbf",margin:1,groupLabelBackgroundColor:"transparent",showDisabled:false,src:"[SKIN]blank.gif"});if(a.editable){var b=isc.HLayout.create({width:1,height:(a.height?a.height:"100%"),defaultLayoutAlign:"center",members:[isc.BizUtil.createUploadButton(this)]});this.canvas=isc.HLayout.create({defaultLayoutAlign:"center",members:[this._img,isc.LayoutSpacer.create({width:5}),b]})}else{this.canvas=isc.HLayout.create({defaultLayoutAlign:"center",members:[this._img]})}this.Super("init",arguments)},setValue:function(b){if((this.canvas!=null)&&(!this.userSetValue)){if(b){var a=SKYVE.Util.CONTEXT_URL+"content?_n="+b+"&_doc="+this.form._view._mod+"."+this.form._view._doc+"&_b="+this.name.replaceAll("_",".")+"&_w="+(this._img.getWidth()-20)+"&_h="+(this._img.getHeight()-20);+this._img.setSrc(a)}else{this._img.setSrc("[SKIN]blank.gif")}}return this.Super("setValue",[b])}});isc.SimpleType.create({inheritsFrom:"canvas",name:"bizContentImage",editorType:"BizContentImageItem"});isc.ClassFactory.defineClass("BizLookupDescriptionItem",isc.CanvasItem);isc.BizLookupDescriptionItem.addProperties({height:20,width:"*",rowSpan:"*",endRow:false,startRow:false,canFocus:true,shouldSaveValue:true,fetchMissingValues:false,autoFetchData:false,canCreate:false,canUpdate:false,canPick:true,canEdit:true,canAdd:true,canClear:true});isc.BizLookupDescriptionItem.addMethods({init:function(a){var b=this;var c={name:"_combo",type:"comboBox",showTitle:false,width:"*",height:22,selectOnFocus:true,fetchMissingValues:false,autoFetchData:false,useClientSideFiltering:false,cachePickListResults:false,allowEmptyValue:a.allowEmptyValue,optionDataSource:a.optionDataSource,valueField:a.valueField,displayField:a.displayField,pickListFields:a.pickListFields,filterFields:a.filterFields,pickListProperties:{filterData:function(f,e,d){if(d){if(d.params){}else{d.params={}}}else{d={};d.params={}}d.params._c=b._view.gather(false)._c;if(b._view._b){d.params._b=b._view._b}d.params._cc="";this.Super("filterData",arguments)}},completeOnTab:true,textMatchStyle:"substring",getPickListFilterCriteria:function(){var d=this.Super("getPickListFilterCriteria",arguments);if(a.params){d=isc.BizUtil.completeFilterCriteria(d,a.params,b._view)}return d},showPicker:function(){var d=this.getOptionDataSource();if(d){if(d.compareCriteria){d._drop=true}}this.Super("showPicker")},changed:function(e,d,f){if(this.getDisplayValue()==f){b.Super("setValue",null)}else{b.Super("setValue",[f]);if(f){b.bizPicked(b.form,b,f)}}},blur:function(e,d){if(b.getValue()==null){var f=d.getValue();if(f&&(f!="")){d.setValue("")}}},valueMap:{}};if(a.editable){this._form=isc.DynamicForm.create({writeFormTag:false,numCols:3,colWidths:["*",1,53],margin:0,cellPadding:0});this._splitButton=isc.BizUtil.createSplitButton("Pick",null,false,"Pick a record",function(){var d=isc.BizUtil.getPickList(b,a.params,b._view);d.setDataSource(a.optionDataSource);isc.WindowStack.popup(b.getPageRect(),"Pick",true,[d])},"Other Options",this._form,[{title:"Edit",icon:"icons/zoom.gif",click:function(d){b.zoom(false)},enableIf:function(e,f,d){return(b.canUpdate&&b.canEdit&&(b.getValue()!=null))}},{title:"New",icon:"icons/new.png",click:function(d){if(a&&a.params){var e={};isc.BizUtil.addFilterRequestParams(e,a.params,b._view);b.zoom(true,e)}else{b.zoom(true)}},enableIf:function(e,f,d){return b.canCreate&&b.canAdd}},{title:"Clear",icon:"icons/delete.png",click:function(d){b.setValue(null);b.bizCleared(b.form,b,null)},enableIf:function(e,f,d){return b.canClear}}]);this._form.setItems([c,{type:"spacer",width:1},{name:"_splitButton",showTitle:false,type:"canvas",canvas:this._splitButton}])}else{this._form=isc.DynamicForm.create({writeFormTag:false,numCols:1,colWidths:["*"]});this._form.setItems([c])}this.canvas=this._form;this.Super("init",arguments)},setValue:function(a){if(this.canvas!=null){if(this.userSetValue){this.bizPicked(this.form,this,a)}else{this._form.getItem("_combo").setValue(a)}}this.Super("setValue",[a])},focusInItem:function(){if(this._form){this._form.getItem("_combo").focusInItem()}},bizAdded:function(b,a,c){},bizEdited:function(b,a,c){},bizPicked:function(b,a,c){},bizCleared:function(b,a,c){},setValueMapFromEditView:function(a){this._setValueMap(a[this.name],a[this.name+"_"+this.displayField])},setValueMapFromPickList:function(a){this._setValueMap(a.bizId,a[this.displayField])},_setValueMap:function(a,b){if(a){var c={};c[a]=b?b:"<unknown>";this._form.getItem("_combo").setValueMap(c);this.setValueMap(c)}},enableDisablePick:function(){this._form.getItem("_combo").setDisabled(!this.canPick);if(this._splitButton){this._splitButton.getMember(0).setDisabled(!this.canPick)}},zoom:function(a,f){var d=this;var b=isc.DataSource.get(this.optionDataSource).modoc;var c=b.indexOf(".");var e=b.substring(c+1);b=b.substring(0,c);isc.BizUtil.getEditView(b,e,function(h){var j=(d._view._b)?d._view._b+"."+d.name:d.name;var i=d.getPageRect();if(a){var k=d.required;if(k){d.setRequired(false)}var g=d._view.gather(true);if(g){}else{isc.warn("You cannot zoom in until you fix the problems found")}if(g._apply||d._view._vm.valuesHaveChanged()){delete g._apply;d._view.saveInstance(true,null,function(){d.setRequired(k);isc.WindowStack.popup(i,"New",false,[h]);h.newInstance(f,j,g._c,false)})}else{d.setRequired(k);isc.WindowStack.popup(i,"New",false,[h]);h.newInstance(f,j,g._c,false)}}else{var g=d._view.gather(true);if(g){}else{isc.warn("You cannot zoom in until you fix the problems found")}if(g._apply||d._view._vm.valuesHaveChanged()){delete g._apply;d._view.saveInstance(true,null,function(){isc.WindowStack.popup(i,"Edit",false,[h]);h.editInstance(d.getValue(),j,g._c,false)})}else{isc.WindowStack.popup(i,"Edit",false,[h]);h.editInstance(d.getValue(),j,g._c,false)}}})}});isc.SimpleType.create({inheritsFrom:"comboBox",name:"bizLookupDescription",editorType:"BizLookupDescriptionItem"});var CKEDITOR=null;isc.ClassFactory.defineClass("BizHTMLItem",isc.CanvasItem);isc.BizHTMLItem.addProperties({width:"*",height:"200px",rowSpan:"*",endRow:false,startRow:false,canFocus:true,shouldSaveValue:true});isc.BizHTMLItem.addMethods({init:function(a){this._pane=isc.HTMLPane.create({width:a.width,height:a.height,isGroup:true,styleName:"bizhubRoundedBorder",groupBorderCSS:"1px solid #bfbfbf",margin:1,groupLabelBackgroundColor:"transparent",padding:10,contents:"Empty"});var b=this;this._editButton=isc.IButton.create({height:22,width:30,title:"Edit",canHover:true,getHoverHTML:function(){return"Edit the HTML"},click:function(c){if(CKEDITOR){this._show()}else{SKYVE.Util.loadJS("ckeditor/ckeditor.js",function(){b._editButton._show()})}},_show:function(){var c=b.form._view;var e=c.gather(false);var d=isc.Canvas.create({width:"100%",height:"100%"});d.setContents('<div style="width:100%;height:100%" id="_CKEditor"></div>');d.draw=function(){this.Super("draw");CKEDITOR.config.filebrowserImageBrowseUrl="pages/htmlEdit/browseImages.jsp?_doc="+c._mod+"."+c._doc+"&_id="+e.bizId,CKEDITOR.config.filebrowserBrowseUrl="pages/htmlEdit/browseDocuments.jsp?_doc="+c._mod+"."+c._doc+"&_id="+e.bizId,CKEDITOR.config.resize_enabled=false;CKEDITOR.config.skin="moono-lisa";CKEDITOR.config.autoUpdateElement=false;CKEDITOR.config.baseFloatZIndex=9000000;CKEDITOR.config.toolbar=[["Source","-","NewPage","Preview"],["Cut","Copy","Paste","PasteText","PasteFromWord","-","Print","SpellChecker","Scayt"],["Undo","Redo","-","Find","Replace","-","SelectAll","RemoveFormat"],"/",["Bold","Italic","Underline","Strike","-","Subscript","Superscript"],["NumberedList","BulletedList","-","Outdent","Indent","Blockquote","CreateDiv"],["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"],["Link","Unlink","Anchor"],["Image","Flash","Table","HorizontalRule","Smiley","SpecialChar","PageBreak"],"/",["Format","Font","FontSize"],["TextColor","BGColor"],["Maximize","ShowBlocks"]];CKEDITOR.config.coreStyles_bold={element:"b",overrides:"strong"};CKEDITOR.config.coreStyles_italic={element:"i",overrides:"em"};b._editor=CKEDITOR.replace("_CKEditor",{customConfig:SKYVE.Util.ckEditorConfigFileUrl});b._editor.setData(b.getValue());return this};isc.WindowStack.popup(null,"Edit HTML",true,[d,isc.HLayout.create({membersMargin:5,margin:10,align:"right",members:[isc.IButton.create({height:22,width:60,title:"Apply",click:function(f){b.setValue(b._editor.getData());isc.WindowStack.popoff(false)}}),isc.IButton.create({height:22,width:60,title:"Cancel",click:function(f){isc.WindowStack.popoff(false)}})]})],405)}});this.canvas=isc.HLayout.create({defaultLayoutAlign:"center",members:[this._pane,isc.LayoutSpacer.create({width:3}),this._editButton]});this.Super("init",arguments)},setValue:function(a){if((this.canvas!=null)&&(!this.userSetValue)){if(a){this._pane.setContents(a)}else{this._pane.setContents("")}}return this.Super("setValue",[a])}});isc.SimpleType.create({inheritsFrom:"canvas",name:"bizHTML",editorType:"BizHTMLItem"});isc.ClassFactory.defineClass("GeometryItem","TextItem");isc.GeometryItem.addClassProperties({validOperators:["gWithin","gContains","gOverlaps","gDisjoint","gIntersects","gTouches","gCrosses","gEquals","isNull","notNull"]});isc.GeometryItem.addClassMethods({format:function(a){if(a){if(a.startsWith("POINT")){return"Point"}else{if(a.startsWith("LINESTRING")){return"Line"}else{if(a.startsWith("POLYGON")){return"Polygon"}}}}return""}});isc.GeometryItem.addProperties({width:100,operator:"gWithin",validOperators:isc.GeometryItem.validOperators,selectOnFocus:true});isc.GeometryItem.addMethods({init:function(a){this.icons=[{src:"icons/map.png",prompt:"Click to set or see the geometry on a map",click:function(e,d,c){var b=a.drawingTools?{field:d,drawingTools:a.drawingTools}:{field:d};isc.WindowStack.popup(d.getPageRect(),"Map",true,[isc.BizMapPicker.create(b)])}}];if(a.icons){this.icons.addList(a.icons)}this.Super("init",arguments)},setValueFromPicker:function(a){this.setValue(a);if(this.changed){this.changed(this.form,this,a)}}});isc.SimpleType.create({name:"geometry",inheritsFrom:"text",editorType:"GeometryItem",validOperators:isc.GeometryItem.validOperators});isc.ClassFactory.defineClass("GeometryMapItem",isc.CanvasItem);isc.GeometryMapItem.addProperties({width:"*",rowSpan:"*",endRow:false,startRow:false,canFocus:false,shouldSaveValue:true});isc.GeometryMapItem.addMethods({createCanvas:function(){return isc.HLayout.create({defaultLayoutAlign:"center"})},showValue:function(b,c){if(!this._valueSetFromPicker){var a={field:this,width:(this.width?this.width:"100%"),height:(this.height?this.height:"100%")};if(this.drawingTools){a.drawingTools=this.drawingTools}this.canvas.setMembers([isc.BizMapPicker.create(a)])}},setDisabled:function(a){this.canvas.getMember(0).setDisabled(a)},setValueFromPicker:function(a){this._valueSetFromPicker=true;this.setValue(a);delete this._valueSetFromPicker;if(this.changed){this.changed(this.form,this,a)}}});isc.SimpleType.create({inheritsFrom:"canvas",name:"geometryMapItem",editorType:"GeometryMapItem"});isc.ClassFactory.defineClass("WindowStack");isc.WindowStack.addClassProperties({_margin:0,_stack:[],_unused:[],popup:function(e,i,b,h,j,c,g){isc.WindowStack._margin+=50;var k=isc.WindowStack._unused.pop();var f=c||j;var d=c?c:(isc.Page.getWidth()-isc.WindowStack._margin);var a=j?j:(isc.Page.getHeight()-isc.WindowStack._margin);if(k){k.setTitle(i);k.sizeSet=f;if(h){k.addItems(h)}k.setWidth(d);k.setHeight(a);k.closeClick=function(){isc.WindowStack.popoff(g?true:false)}}else{k=isc.Window.create({headerIconDefaults:{src:"../images/window/skyve_fav.png",width:16,height:16},autoCenter:true,isModal:true,showModalMask:true,showMinimizeButton:false,modalMaskOpacity:25,canDragReposition:true,canDragResize:true,showShadow:true,shadowSoftness:10,shadowOffset:0,title:i,items:h,width:d,height:a,sizeSet:f,closeClick:function(){isc.WindowStack.popoff(g?true:false)}})}k.setShowCloseButton(b);k._fromRect=e;isc.WindowStack._stack.push(k);k.show()},popoff:function(d){var g=isc.WindowStack.getOpener();var a=isc.WindowStack._stack.pop();if(a){isc.WindowStack._animateClose(a);var c=a.items;if(c){if(CKEDITOR&&CKEDITOR.instances._CKEditor){CKEDITOR.instances._CKEditor.destroy();c[0].destroy()}else{for(var e=0,b=c.length;e<b;e++){var f=c[e];if(f._vm){isc.BizUtil.relinquishEditView(f)}else{if(isc.isA.BizListGrid(f)){isc.BizUtil.relinquishPickList(f)}}}}a.removeItems(c)}isc.WindowStack._unused.push(a);isc.WindowStack._margin-=50;if(g){if(g.resume){g.resume()}if(d&&g.rerender){g.rerender()}}}},getOpener:function(){if(isc.WindowStack._stack.length<=1){return isc.BizUtil.getCurrentView()}return isc.WindowStack._stack[isc.WindowStack._stack.length-2].items[0]},resize:function(){var b=isc.Page.getWidth()-50;var d=isc.Page.getHeight()-50;for(var a=0;a<isc.WindowStack._stack.length;a++){var c=isc.WindowStack._stack[a];if(c.sizeSet){}else{c.setWidth(b);c.setHeight(d);b-=50;d-=50}}},_wireframe:isc.Canvas.create({border:"3px ridge #E1E1E1",backgroundColor:"whitesmoke",opacity:75,autoDraw:false}),_animateClosedDuration:400,_animateClose:function(c){if(c._fromRect){var d,a,e,b;d=c.getLeft();a=c.getTop();e=c.getVisibleWidth();b=c.getVisibleHeight();isc.WindowStack._wireframe.setRect([d,a,e,b]);isc.WindowStack._wireframe.show();isc.WindowStack._wireframe.bringToFront()}c.hide();if(c._fromRect){isc.WindowStack._wireframe.animateRect(c._fromRect[0],c._fromRect[1],c._fromRect[2],c._fromRect[3],"isc.WindowStack._wireframe.hide();",isc.WindowStack._animateClosedDuration)}}});isc.ClassFactory.defineClass("ReportDialog");isc.ReportDialog.addClassProperties({_pageFormats:{LETTER:{width:612,height:792},NOTE:{width:540,height:720},LEGAL:{width:612,height:1008},A0:{width:2380,height:3368},A1:{width:1684,height:2380},A2:{width:1190,height:1684},A3:{width:842,height:1190},A4:{width:595,height:842},A5:{width:421,height:595},A6:{width:297,height:421},A7:{width:210,height:297},A8:{width:148,height:210},A9:{width:105,height:148},A10:{width:74,height:105},B0:{width:2836,height:4008},B1:{width:2004,height:2836},B2:{width:1418,height:2004},B3:{width:1002,height:1418},B4:{width:709,height:1002},B5:{width:501,height:709},ARCH_E:{width:595,height:842},ARCH_D:{width:595,height:842},ARCH_C:{width:595,height:842},ARCH_B:{width:595,height:842},ARCH_A:{width:595,height:842},FLSA:{width:612,height:936},FLSE:{width:612,height:936},HALFLETTER:{width:396,height:612},"11x17":{width:792,height:1224},LEDGER:{width:1224,height:792}},_available:[{name:"title",title:"Column",required:true},{name:"line",title:"Line",type:"integer",editorType:"spinner",editorProperties:{min:1,max:9,step:1,defaultValue:1,validators:[{type:"integerRange",min:1,max:9}]},width:50},{name:"width",title:"Width",type:"integer",editorType:"spinner",editorProperties:{min:1,max:9999,step:10,defaultValue:1,validators:[{type:"integerRange",min:1,max:9999}]},width:50}],_selected:[{name:"title",title:"Column",required:true},{name:"line",title:"Line",type:"integer",editorType:"spinner",editorProperties:{min:1,max:9,step:1,defaultValue:1,validators:[{type:"integerRange",min:1,max:9}]},width:50},{name:"width",title:"Width",type:"integer",editorType:"spinner",editorProperties:{min:1,max:9999,step:10,defaultValue:1,validators:[{type:"integerRange",min:1,max:9999}]},width:50}],_valuesManager:isc.ValuesManager.create()});isc.ReportDialog.addClassProperties({_columnList:isc.ListGrid.create({width:"100%",height:"100%",canDragRecordsOut:true,canAcceptDroppedRecords:true,dragDataAction:"move",alternateRecordStyles:true,autoFetchData:false,leaveScrollbarGap:false,showHeaderContextMenu:false,fields:isc.ReportDialog._available}),_selectedColumnList:isc.ListGrid.create({width:"100%",height:"100%",canDragRecordsOut:true,canAcceptDroppedRecords:true,dragDataAction:"move",canReorderRecords:true,canRemoveRecords:false,canEdit:true,editByCell:true,editEvent:"click",modalEditing:true,alternateRecordStyles:true,autoFetchData:false,preventDuplicates:true,leaveScrollbarGap:false,showHeaderContextMenu:false,fields:isc.ReportDialog._selected})});isc.ReportDialog.addClassProperties({_createReportFormatPickList:function(a,b){return{name:"reportFormat",showTitle:false,type:"select",width:300,required:true,valueMap:{pdf:"PDF (Adobe Portable Document Format)",docx:"DOCX (Word Document - Office 2007)",xlsx:"XLSX (Excel Document - Office 2007)",pptx:"PPTX (Powerpoint Document - Office 2007)",xls:"XLS (Excel - 98-2003)",rtf:"RTF (Rich Text Format)",ods:"ODS (Open Document Spreadsheet Format)",odt:"ODT (Open Document Text Format)",html:"HTML (Hyper Text Markup Language)",xhtml:"XHTML (Conformant Hyper Text Markup Language)",csv:"CSV (Comma Separated Values)",xml:"XML (JRXML Format)"},imageURLPrefix:"reporting/",imageURLSuffix:".png",valueIcons:{pdf:"pdf",docx:"rtf",xlsx:"xls",pptx:"pptx",xls:"xls",rtf:"rtf",odt:"oo",ods:"oo",html:"html",xhtml:"html",txt:"txt",csv:"csv",xml:"xml"},defaultValue:"pdf",colSpan:a,change:b}}});isc.ReportDialog.addClassProperties({_columnSelectorLayout:isc.HLayout.create({membersMargin:10,height:"100%",members:[isc.ReportDialog._columnList,isc.VLayout.create({layoutAlign:"center",membersMargin:10,height:100,members:[isc.IButton.create({icon:"reporting/arrow_right.png",iconWidth:24,iconHeight:24,iconAlign:"center",showText:false,width:32,height:32,click:function(){isc.ReportDialog._selectedColumnList.transferSelectedData(isc.ReportDialog._columnList)},canHover:true,getHoverHTML:function(){return"Move the selected columns into the report"}}),isc.IButton.create({icon:"reporting/arrow_left.png",iconWidth:24,iconHeight:24,iconAlign:"center",showText:false,width:32,height:32,click:function(){isc.ReportDialog._columnList.transferSelectedData(isc.ReportDialog._selectedColumnList)},canHover:true,getHoverHTML:function(){return"Move the selected columns out of the report"}})]}),isc.ReportDialog._selectedColumnList]}),_reportFormatForm:isc.DynamicForm.create({valuesManager:isc.ReportDialog._valuesManager,numCols:7,colWidths:[60,200,40,30,"*",60,"*"],padding:15,items:[isc.ReportDialog._createReportFormatPickList(3,function(c,b,d,a){if((d=="pdf")||(d=="docx")||(d=="pptx")||(d=="rtf")||(d=="odt")){c.getItem("isPaginated").setValue(true);c.getItem("isPretty").setValue(true);c.getItem("showSummary").setValue(true)}else{if((d=="html")||(d=="xhtml")){c.getItem("isPaginated").setValue(false);c.getItem("isPretty").setValue(true);c.getItem("showSummary").setValue(true)}else{c.getItem("isPaginated").setValue(false);c.getItem("isPretty").setValue(false);c.getItem("showSummary").setValue(false)}}c.getItem("fileNameSuffix").setValue("."+d)}),{name:"isPaginated",title:"Paginated Report",type:"checkbox",required:true,defaultValue:true},{name:"style",title:"Style",type:"radioGroup",vertical:true,required:true,rowSpan:2,valueMap:{tabular:"Tabular",columnar:"Columnar"},defaultValue:"tabular",change:function(c,b,d,a){if(d=="columnar"){isc.ReportDialog._columnList.hideField("line");isc.ReportDialog._columnList.hideField("width");isc.ReportDialog._selectedColumnList.hideField("line");isc.ReportDialog._selectedColumnList.hideField("width")}else{isc.ReportDialog._columnList.showField("line");isc.ReportDialog._columnList.showField("width");isc.ReportDialog._selectedColumnList.showField("line");isc.ReportDialog._selectedColumnList.showField("width")}}},{name:"fileNameNoSuffix",title:"Filename",type:"text",required:true,width:"100%",defaultValue:"export"},{name:"fileNameSuffix",showTitle:false,type:"staticText",startRow:false,endRow:false,defaultValue:".pdf"},{name:"isPretty",title:"Pixel Perfect",type:"checkbox",required:true,defaultValue:true},{type:"spacer"},{type:"spacer"},{type:"spacer"},{name:"showSummary",title:"Show Summary",type:"checkbox",required:true,defaultValue:true}]}),_pageFormatForm:isc.DynamicForm.create({valuesManager:isc.ReportDialog._valuesManager,numCols:10,padding:15,items:[{name:"format",title:"Format",type:"select",required:true,width:80,valueMap:["LETTER","NOTE","LEGAL","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","A10","B0","B1","B2","B3","B4","B5","ARCH_E","ARCH_D","ARCH_C","ARCH_B","ARCH_A","FLSA","FLSE","HALFLETTER","11x17","LEDGER"],defaultValue:"A4",change:function(c,b,d,a){if(c.getItem("orientation").getValue()=="portrait"){c.getItem("width").setValue(isc.ReportDialog._pageFormats[d].width);c.getItem("height").setValue(isc.ReportDialog._pageFormats[d].height)}else{c.getItem("width").setValue(isc.ReportDialog._pageFormats[d].height);c.getItem("height").setValue(isc.ReportDialog._pageFormats[d].width)}}},{name:"orientation",title:"Orientation",type:"radioGroup",required:true,valueMap:{portrait:"Portrait",landscape:"Landscape"},defaultValue:"portrait",change:function(g,f,e,b){var a=g.getItem("width");var d=g.getItem("height");var c=a.getValue();a.setValue(d.getValue());d.setValue(c)}},{name:"width",title:"Width",type:"spinner",required:true,width:80,min:1,max:9999,step:1,defaultValue:isc.ReportDialog._pageFormats.A4.width,validators:[{type:"integerRange",min:1,max:9999}]},{name:"height",title:"Height",type:"spinner",required:true,width:80,min:1,max:9999,step:1,defaultValue:isc.ReportDialog._pageFormats.A4.height,validators:[{type:"integerRange",min:1,max:9999}]}]}),_marginsForm:isc.DynamicForm.create({valuesManager:isc.ReportDialog._valuesManager,numCols:8,padding:15,items:[{name:"top",title:"Top",type:"spinner",required:true,width:80,min:1,max:9999,step:1,defaultValue:20,validators:[{type:"integerRange",min:1,max:9999}]},{name:"bottom",title:"Bottom",type:"spinner",required:true,width:80,min:1,max:9999,step:1,defaultValue:20,validators:[{type:"integerRange",min:1,max:9999}]},{name:"left",title:"Left",type:"spinner",required:true,width:80,min:1,max:9999,step:1,defaultValue:20,validators:[{type:"integerRange",min:1,max:9999}]},{name:"right",title:"Right",type:"spinner",required:true,width:80,min:1,max:9999,step:1,defaultValue:20,validators:[{type:"integerRange",min:1,max:9999}]}]}),_submitForm:isc.DynamicForm.create({autoDraw:true,canSubmit:true,method:"POST",items:[{name:"values",type:"hidden"},{name:"_c",type:"hidden"}]}),_layout:null,_criteria:null,_tagId:null,_dataSourceID:null,_createReportPanel:function(a,b){return isc.HLayout.create({backgroundImage:"background.png",backgroundRepeat:"repeat",membersMargin:5,margin:5,layoutAlign:"center",members:[isc.VLayout.create({backgroundImage:"background.png",backgroundRepeat:"repeat",width:134,height:130,layoutAlign:"center",margin:0,membersMargin:10,members:[isc.HLayout.create({width:134,align:"center",members:[isc.Img.create({imageType:"normal",src:"reporting/reporting.png",height:96,layoutAlign:"center"})]}),isc.HLayout.create({width:134,align:"center",members:[a]})]}),b]})},_createExport:function(){if(isc.ReportDialog._exportLayout==null){isc.ReportDialog._exportLayout=isc.VLayout.create({backgroundImage:"background.png",backgroundRepeat:"repeat",height:"100%",width:"100%",autoDraw:true,margin:5,membersMargin:5,members:[isc.ReportDialog._createReportPanel(isc.IButton.create({title:"Generate",click:function(){if(isc.ReportDialog._valuesManager.validate()){var b=isc.ReportDialog._valuesManager.getValues();b.columns=isc.ReportDialog._selectedColumnList.getData();b.ds=isc.ReportDialog._dataSourceID;if(isc.ReportDialog._criteria){b.criteria=isc.ReportDialog._criteria}if(isc.ReportDialog._tagId){b.tagId=isc.ReportDialog._tagId}var c=isc.ReportDialog._reportFormatForm.getItem("reportFormat").getValue();var a=isc.ReportDialog._reportFormatForm.getItem("fileNameNoSuffix").getValue();isc.ReportDialog._submitForm.setValue("values",isc.JSON.encode(b,{prettyPrint:false}));if(isc.ReportDialog._c){isc.ReportDialog._submitForm.setValue("_c",isc.ReportDialog._c)}isc.ReportDialog._submitForm.setAction("export/"+a+"."+c);isc.ReportDialog._submitForm.setTarget(((c==="html")||(c==="xhtml"))?"_blank":"_self");isc.ReportDialog._submitForm.submitForm()}}}),isc.VLayout.create({backgroundImage:"background.png",backgroundRepeat:"repeat",margin:0,membersMargin:5,members:[isc.VLayout.create({isGroup:true,groupTitle:"Report Format",styleName:"bizhubRoundedBorder",groupBorderCSS:"1px solid #bfbfbf",margin:1,groupLabelBackgroundColor:"transparent",groupLabelStyleName:"bizhubBorderLabel",backgroundImage:"background.png",backgroundRepeat:"repeat",members:[isc.ReportDialog._reportFormatForm]}),isc.VLayout.create({isGroup:true,groupTitle:"Page Format",styleName:"bizhubRoundedBorder",groupBorderCSS:"1px solid #bfbfbf",margin:1,groupLabelBackgroundColor:"transparent",groupLabelStyleName:"bizhubBorderLabel",backgroundImage:"background.png",backgroundRepeat:"repeat",members:[isc.ReportDialog._pageFormatForm]}),isc.VLayout.create({isGroup:true,groupTitle:"Margins",styleName:"bizhubRoundedBorder",groupBorderCSS:"1px solid #bfbfbf",margin:1,groupLabelBackgroundColor:"transparent",groupLabelStyleName:"bizhubBorderLabel",backgroundImage:"background.png",backgroundRepeat:"repeat",members:[isc.ReportDialog._marginsForm]})]})),isc.ReportDialog._columnSelectorLayout]})}},popupExport:function(b,c,f,e,d,a){isc.ReportDialog._createExport();isc.ReportDialog._dataSourceID=b;isc.ReportDialog._c=c;isc.ReportDialog._criteria=f;isc.ReportDialog._tagId=e;isc.ReportDialog._columnList.setData(d);isc.ReportDialog._selectedColumnList.setData(a);isc.WindowStack.popup(null,"Reporting",true,[isc.ReportDialog._exportLayout])},popupReport:function(b,d){if(d&&d._f){var c=d._f;var a=isc.addProperties({},d);delete a._f;isc.ReportDialog._redirectToReport(b,a,c)}else{if(isc.ReportDialog._reportLayout==null){isc.ReportDialog._reportLayout=isc.ReportDialog._createReportPanel(isc.IButton.create({title:"View",ID:"_reportViewButton",_view:null,_params:null,click:function(){var e=_reportForm.getValue("reportFormat");isc.ReportDialog._redirectToReport(this._view,this._params,e)}}),isc.DynamicForm.create({ID:"_reportForm",fields:[{type:"rowSpacer"},{type:"rowSpacer"},isc.ReportDialog._createReportFormatPickList(1,function(g,f,h,e){})]}))}_reportViewButton._view=b;_reportViewButton._params=d;isc.WindowStack.popup(null,"Report",true,[isc.ReportDialog._reportLayout],180,480)}},_redirectToReport:function(h,e,j){var l=h.gather(false);if(l){var g=l._c;var i=h._b;var k=l.bizId;var a;if(e&&e._n){a="report/"+e._n+"."+j+"?_f="+j+(g?"&_c="+g:"")+(i?"&_b="+i:"")+(k?"&_id="+k:"")}else{a="report/?_f="+j+(g?"&_c="+g:"")+(i?"&_b="+i:"")+(k?"&_id="+k:"")}if(e){for(var d in e){var f=e[d];a+="&"+d+"="+encodeURI(h.toDisplay(f,l)).replaceAll("?","%3F").replaceAll("&","%26")}}if((j==="html")||(j==="xhtml")){window.open(a,"report","location=0,status=0,scrollbars=1,resizable=1,width=800,height=600")}else{window.location=a}}}});isc.defineClass("AdvancedFilter","VLayout");isc.AdvancedFilter.addProperties({width:"100%",height:1,overflow:"visible",membersMargin:2,margin:2,filterableComponent:null,filterableComponentConfig:null,toggleButton:null,_filterBuilder:null,_filterButtonDefaults:null});isc.AdvancedFilter.addMethods({initWidget:function(){this._filterButtonDefaults={_constructor:isc.IButton,autoFit:true,title:"Filter",icon:"../images/icons/filter_add.png"};this.Super("initWidget",arguments);this.toggleButton=isc.ImgButton.create({size:20,src:"../images/icons/filterButton.png",showRollOver:false,showFocused:false,actionType:"checkbox",selected:false,canHover:true,getHoverHTML:function(){if(this.selected){return"Use <b>simple</b> filtering"}else{return"Use <b>advanced</b> filtering"}}});var a=this;this._styleForm=isc.DynamicForm.create({numCols:2,width:200,items:[{name:"style",title:"Style",type:"radioGroup",vertical:false,required:true,valueMap:{radio:"Flat",bracket:"Nested",inline:"Inline"},defaultValue:"radio",changed:function(c,b,d){a.setDataSource(a._filterBuilder.getDataSource())}}]});this.addMember(this._styleForm);this.getStyle=function(){return this._styleForm.getValue("style")};this.setStyle=function(b){this._styleForm.setValue("style",b);this.setDataSource(this._filterBuilder.getDataSource())}},toggleButtonClick:function(){if(this.toggleButton.selected){this.filterableComponent.grid.setShowFilterEditor(false);this.filterableComponent.grid.filterData(this._filterBuilder.getCriteria());this.show()}else{this.filterableComponent.grid.setShowFilterEditor(true);this.filterableComponent.grid.setFilterEditorCriteria({});this.filterableComponent.grid.filterData({});this.hide()}},setDataSource:function(b){if(this._filterBuilder){this.removeMember(this._filterBuilder);this._filterBuilder.destroy();this._filterBuilder=null}else{this._filterButton=this.createAutoChild("_filterButton",{click:function(){this.creator.filterableComponent.grid.filterData(this.creator._filterBuilder.getCriteria(),null,{params:{_summary:this.creator.filterableComponent.summaryType}})}});this.addMember(this._filterButton)}var a=this._styleForm.getValue("style");if(a){}else{a="radio"}this._filterBuilder=isc.FilterBuilder.create({dataSource:b,topOperatorAppearance:a,allowEmpty:true});this.addMember(this._filterBuilder,1);if(this.toggleButton.selected){this.show()}else{this.hide()}},getCriteria:function(){if(this._filterBuilder){return this._filterBuilder.getCriteria()}else{return null}},clearCriteria:function(){if(this._filterBuilder){this._filterBuilder.clearCriteria()}},setCriteria:function(a){if(this._filterBuilder){this._filterBuilder.setCriteria(a)}}});isc.ClassFactory.defineClass("BizGrid","VLayout");isc.BizGrid.addProperties({title:null,grid:null,_eventRowNum:null,_eventColumnNum:null,_eventRecord:null,_disabled:false,deleteSelectionItem:null,deleteSelectionButton:null,clearSelectionItem:null,aggregate:false,canCreate:false,canUpdate:false,canDelete:false,canAdd:true,canEdit:true,canZoom:true,canRemove:true,isRepeater:false,showColumnHeaders:true,showGrid:true});isc.BizGrid.addMethods({initWidget:function(){this.Super("initWidget",arguments);var a=this;a.deleteSelectionItem={title:"Delete/Remove Selected",icon:"../images/icons/delete.png",enableIf:function(c,d,b){return((!a._disabled)&&a.canDelete&&a.canRemove&&a.grid.anySelected())},click:function(){isc.ask("Do you want to delete/remove the selected rows?",function(d){if(d){var c={};if(a._view){var b=a._view.gather(false);c.params={_c:b._c}}a.grid.removeSelectedData(function(){a.grid.selectionChanged(null,false);a._eventRowNum=null;a._eventColumnNum=null;a._eventRecord=null;if(a._view){if(a._b){a._view._vm.setValue("_changed",true);a._view._vm.setValue("_apply",true)}if(a.bizRemoved){a.bizRemoved()}}},c)}})}};a.deleteSelectionButton=isc.BizUtil.createImageButton(a.deleteSelectionItem.icon,true,"<b>Delete/Remove</b> selected.",a.deleteSelectionItem.click);a.deleteSelectionButton.setDisabled(true);a.clearSelectionItem={title:"Deselect all",icon:"../images/icons/clearSelection.png",click:function(){a.grid.deselectAllRecords();a._eventRowNum=null;a._eventColumnNum=null;a._eventRecord=null}}},refresh:function(){this.grid.refresh()}});isc.ClassFactory.defineClass("BizListGrid","BizGrid");isc.BizListGrid.addProperties({summaryType:"",tagId:null,_dataSource:null,_toolbar:null,_advancedFilter:null,_summaryGrid:null,_flagForm:null,_flagDialog:null,_newButton:null,_zoomButton:null,_editButton:null,_pickButton:null,showAdd:true,showZoom:true,showEdit:true,showRemove:true,showDeselect:true,showExport:true,showFilter:true,showSummary:true,showSnap:true,showTag:true,autoPopulate:true,_lookup:null});isc.BizListGrid.addMethods({initWidget:function(p){this.Super("initWidget",arguments);var r=this;this._config=p;r._flagDialog=isc.Window.create({autoCenter:true,isModal:true,showModalMask:true,canDragReposition:true,canDragResize:false,showShadow:true,shadowSoftness:10,shadowOffset:0,title:"Flag",headerIconDefaults:{src:"../images/flag.gif",width:16,height:16},showMaximizeButton:false,showMinimizeButton:false,showHeaderIcon:true,items:[isc.DynamicForm.create({padding:5,width:"100%",useAllDataSourceFields:false,fields:[{name:"bizFlagComment",type:"richText",height:175,width:"100%",validators:[{type:"lengthRange",min:0,max:1024,clientOnly:true}]}]}),isc.HLayout.create({padding:10,membersMargin:5,align:"right",members:[isc.IButton.create({title:"Clear",width:100,click:function(){var s=r._flagForm.getField("bizFlagComment");if(s.getValue()!=""){s.setValue("");r._flagForm.saveData(function(u,v,t){if(u.status>=0){r._flagForm.reset();r._flagDialog.hide()}})}}}),isc.IButton.create({title:"Flag",width:100,click:function(){if(r._flagForm.validate(true)){r._flagForm.saveData(function(t,u,s){if(t.status>=0){r._flagForm.reset();r._flagDialog.hide()}})}}})]})],width:580,height:265});var n=function(){var s=r._advancedFilter.toggleButton.selected?r._advancedFilter.getCriteria():r.grid.getFilterEditorCriteria(true);if(p&&p.params){s=isc.BizUtil.completeFilterCriteria(s,p.params,r._view)}return s};var f={title:"New",icon:"../images/icons/new.png",enableIf:function(t,u,s){return((!r._disabled)&&r.canCreate&&r.canAdd)},click:function(){if(p){var s=false;if(p.contConv){s=p.contConv}if(s){var t=r._view.gather(false)._changed;if(t||r._view._vm.valuesHaveChanged()){isc.say("There are unsaved changes in the "+r._view._singular+".  Save your changes to the "+r._view._singular+" first.",null,{title:"Unsaved Changes!"});return}}var u={};if(p.params){isc.BizUtil.addFilterRequestParams(u,p.params,r._view)}r.zoom(true,s,u)}else{r.zoom(true,false)}}};r._zoomItem={title:"Zoom",icon:"../images/icons/zoom.gif",enableIf:function(t,u,s){return(r.canZoom&&r.grid.anySelected())},click:function(){if(p&&p.contConv){var s=r._view.gather(false)._changed;if(s||r._view._vm.valuesHaveChanged()){isc.say("There are unsaved changes in the "+r._view._singular+".  Save your changes to the "+r._view._singular+" first.",null,{title:"Unsaved Changes!"})}else{r.zoom(false,true)}}else{r.zoom(false,false)}}};var l={title:"Edit",icon:"../images/icons/edit.png",enableIf:function(t,u,s){return((!r._disabled)&&r.canUpdate&&r.canEdit&&r.grid.anySelected())},click:function(){if(r.grid.anySelected()){if(r._view){if(r.grid.saveRequestProperties){}else{r.grid.saveRequestProperties={}}if(r.grid.saveRequestProperties.params){}else{r.grid.saveRequestProperties.params={}}var s=r._view.gather(false);if(p&&p.contConv){if(s._changed||r._view._vm.valuesHaveChanged()){isc.say("There are unsaved changes in the "+r._view._singular+".  Save your changes to the "+r._view._singular+" first.",null,{title:"Unsaved Changes!"})}else{r.grid.saveRequestProperties.params._cc=""}}r.grid.saveRequestProperties.params._c=s._c;r.grid.startEditing(r._eventRowNum,r._eventColNum)}else{if(r.grid.saveRequestProperties&&r.grid.saveRequestProperties.params){delete r.grid.saveRequestProperties.params._c}r.grid.startEditing(r._eventRowNum,r._eventColNum)}}}};var i={title:"Pick",icon:"../images/icons/select.png",enableIf:function(t,u,s){return !r._disabled},click:function(){r.pick(r._lookup)}};r._newButton=isc.BizUtil.createImageButton(f.icon,true,"<b>New</b> record.",f.click);r._zoomButton=isc.BizUtil.createImageButton(r._zoomItem.icon,true,"<b>Zoom</b> into record.",r._zoomItem.click);r._zoomButton.setDisabled(true);r._editButton=isc.BizUtil.createImageButton(l.icon,true,"<b>Edit</b> a record inline.",l.click);r._editButton.setDisabled(true);r._pickButton=isc.BizUtil.createImageButton(i.icon,true,"<b>Pick</b> this record.",i.click);r._pickButton.setDisabled(true);var o={title:"Clear Filter",icon:"../images/icons/filter_delete.png",click:function(){r.grid.setFilterEditorCriteria({});r._advancedFilter.clearCriteria();r.refresh()}};var a={title:"Refresh",icon:"../images/icons/refresh.png",click:function(){r.refresh()}};var b=function(){var C=r._dataSource.getFieldNames(true);var z=[{name:"bizFlagComment",title:"Flag",line:1,width:100}];var v=[];var u=r.getFieldState();for(var w=0,t=C.length;w<t;w++){var A=C[w];if((A!="bizTagged")&&(A!="bizFlagComment")){var y=r._dataSource.getField(A);var B=r.grid.getField(A);var x=B?B.align:"center";if(u[w]&&((u[w].visible===undefined)||(u[w].visible==null)||(u[w].visible))){v.add({name:A,title:y.title,line:1,width:u[w].width,align:x})}else{z.add({name:A,title:y.title,line:1,width:100,align:x})}}}var s=n();isc.ReportDialog.popupExport(r._dataSource.ID,r._view?r._view.gather(false)._c:null,s,r.tagId,z,v)};var q={title:"Export Data...",icon:"../images/icons/export.png",click:function(){var s=r.grid.getTotalRows();if(s>10000){isc.ask("There are "+s+" rows in this list to export which could take more than 1 minute!  Do you want to continue?",function(t){if(t){b()}})}else{if(s>1000){isc.ask("There are "+s+" rows to export which may take a few seconds.  Do you want to continue?",function(t){if(t){b()}})}else{b()}}}};var c=(p&&p.isPickList)?[i]:[];if(r.showAdd){c.add(f)}if(r.showZoom){c.add(r._zoomItem)}if(r.showEdit){c.add(l)}if(r.showRemove){c.add(this.deleteSelectionItem)}if(c.length>0){c.add({isSeparator:true})}if(r.showDeselect){c.add(this.clearSelectionItem)}if(r.showFilter){if(r._config.isTree){}else{c.add(o)}}c.add(a);if(r.showExport){c.addList([{isSeparator:true},q])}r._contextMenu=isc.Menu.create({showShadow:true,shadowDepth:10,data:c});r._advancedFilter=isc.AdvancedFilter.create({filterableComponent:r,filterableComponentConfig:p});r._advancedFilter.toggleButton.click=function(){r._advancedFilter.toggleButtonClick()};var m=isc.Menu.create({showShadow:true,shadowDepth:10,canSelectParentItems:true,data:[]});var h=isc.ToolStripMenuButton.create({autoFit:true,padding:3,title:"No Snapshot",menu:m,click:function(){var s={a:"L",ID:h.ID,d:r._dataSource.ID};if(r.snapId){s.i=r.snapId}isc.RPCManager.sendRequest({showPrompt:false,evalResult:true,useSimpleHttp:true,httpMethod:"POST",params:s,actionURL:SKYVE.Util.CONTEXT_URL+"smartsnap",callback:function(v,u,t){m.setData(u)}});this.Super("click",arguments)}});h.newSnap=function(){isc.askForValue("Enter the new snapshot name",function(s){if(s){isc.RPCManager.sendRequest({showPrompt:true,evalResult:true,useSimpleHttp:true,httpMethod:"POST",params:{a:"N",n:s,d:r._dataSource.ID,s:{criteria:r._advancedFilter.toggleButton.selected?r._advancedFilter.getCriteria():r.grid.getFilterEditorCriteria(true),advancedCriteriaStyle:r._advancedFilter.getStyle(),fieldState:r.grid.getFieldState(),sortState:r.grid.getSortState(),groupState:r.grid.getGroupState(),summaryType:r.summaryType}},actionURL:SKYVE.Util.CONTEXT_URL+"smartsnap",callback:function(v,u,t){r.snapId=u.bizId;h.setTitle(s)}})}},{width:300})};h.setSnap=function(t,u,s){r.snapId=t;h.setTitle(u);if(s){if(s.criteria){if(s.criteria.operator){r._advancedFilter.toggleButton.select();r._advancedFilter.toggleButtonClick();r._advancedFilter.setStyle(s.advancedCriteriaStyle);r.grid.setFilterEditorCriteria({});r._advancedFilter.setCriteria(s.criteria)}else{r._advancedFilter.toggleButton.deselect();r._advancedFilter.toggleButtonClick();r.grid.setFilterEditorCriteria(s.criteria);r._advancedFilter.clearCriteria()}}if(s.fieldState){r.grid.setFieldState(s.fieldState)}if(s.sortState){r.grid.setSortState(s.sortState)}if(s.groupState){r.grid.setGroupState(s.groupState)}if(s.summaryType){r.summaryType=s.summaryType;r._summaryGrid.data[0].bizFlagComment=s.summaryType}}r.refresh()};h.updateSnap=function(s){isc.RPCManager.sendRequest({showPrompt:true,evalResult:true,useSimpleHttp:true,httpMethod:"POST",params:{a:"U",i:s,s:{criteria:r._advancedFilter.toggleButton.selected?r._advancedFilter.getCriteria():r.grid.getFilterEditorCriteria(true),advancedCriteriaStyle:r._advancedFilter.getStyle(),fieldState:r.grid.getFieldState(),sortState:r.grid.getSortState(),groupState:r.grid.getGroupState(),summaryType:r.summaryType}},actionURL:SKYVE.Util.CONTEXT_URL+"smartsnap"})};h.deleteSnap=function(s){isc.ask("Do you want to delete this snapshot?",function(t){if(t){isc.RPCManager.sendRequest({showPrompt:true,evalResult:true,useSimpleHttp:true,httpMethod:"POST",params:{a:"D",i:s},actionURL:SKYVE.Util.CONTEXT_URL+"smartsnap",callback:function(w,v,u){h.setSnap(null,"No Snapshot",null)}})}})};r._clearSnap=function(){r.snapId=null;h.setTitle("No Snapshot")};var k=isc.Menu.create({showShadow:true,shadowDepth:10,canSelectParentItems:true,data:[]});var d=isc.ToolStripMenuButton.create({autoFit:true,padding:3,title:"No Tag",menu:k,click:function(){var s={a:"L",ID:d.ID};if(r.tagId){s.t=r.tagId}isc.RPCManager.sendRequest({showPrompt:false,evalResult:true,useSimpleHttp:true,httpMethod:"POST",params:s,actionURL:SKYVE.Util.CONTEXT_URL+"smarttag",callback:function(v,u,t){k.setData(u)}});this.Super("click",arguments)}});d.newTag=function(){isc.askForValue("Enter the new tag name",function(s){if(s){isc.RPCManager.sendRequest({showPrompt:true,evalResult:true,useSimpleHttp:true,httpMethod:"POST",params:{a:"N",n:s,ID:d.ID},actionURL:SKYVE.Util.CONTEXT_URL+"smarttag",callback:function(v,u,t){r.tagId=u.bizId;d.setTitle(s);r.refresh()}})}},{width:300})};d.setTag=function(s,t){r.tagId=s;d.setTitle(t);r.refresh()};d.tagOp=function(s,u){if(u=="C"){isc.ask("Do you want to clear all tagged data from this tag?",function(v){if(v){g(s,u)}})}else{if(u=="D"){isc.ask("Do you want to delete this tag?",function(v){if(v){g(s,u)}})}else{if((u=="T")||(u=="U")){var t=r.grid.getTotalRows();if(t>10000){isc.ask("There are "+t+" rows in this list to "+((u=="U")?"un":"")+"tag which could take more than 1 minute!  Do you want to continue?",function(v){if(v){g(s,u)}})}else{if(t>1000){isc.ask("There are "+t+" rows to "+((u=="U")?"un":"")+"tag which may take a few seconds.  Do you want to continue?",function(v){if(v){g(s,u)}})}else{g(s,u)}}}else{g(s,u)}}}};var g=function(s,t){var u={a:t,t:s};if(t=="T"||t=="U"){u.d=r._dataSource.ID;var v=n();u.c=v;if(r._view){u._c=r._view.gather(false)._c}}isc.RPCManager.sendRequest({showPrompt:true,evalResult:true,useSimpleHttp:true,httpMethod:"POST",params:u,actionURL:SKYVE.Util.CONTEXT_URL+"smarttag",callback:function(y,x,w){if(t=="D"){d.setTag(null,"No Tag")}r.refresh()}})};var j=(p&&p.isPickList)?[r._pickButton]:[];if(r.showAdd){j.add(r._newButton)}if(r.showZoom){j.add(r._zoomButton)}if(r.showEdit){j.add(r._editButton)}if(r.showRemove){j.add(r.deleteSelectionButton)}if(j.length>0){j.add("separator")}if(r.showDeselect){j.add(isc.BizUtil.createImageButton(r.clearSelectionItem.icon,false,"<b>Deselect</b> all.",r.clearSelectionItem.click))}if(r.showFilter){if(r._config.isTree){}else{j.add(isc.BizUtil.createImageButton(o.icon,false,"<b>Clear filter</b> criteria.",o.click))}}j.add(isc.BizUtil.createImageButton(a.icon,false,"<b>Refresh</b> table data.",a.click));if(r.showFilter){if(r._config.isTree){}else{j.addList(["separator",r._advancedFilter.toggleButton])}}if(p&&p.isPickList){}else{if(r.showExport){j.addList(["separator",isc.BizUtil.createImageButton(q.icon,false,"<b>Export</b> table data.",q.click)])}if(r.showSnap){j.addList(["separator",isc.Label.create({width:60,contents:"Snapshot:"}),h])}if(r.showTag){j.addList(["separator",isc.Label.create({width:30,contents:"Tag:"}),d])}}r._toolbar=isc.ToolStrip.create({membersMargin:2,layoutMargin:2,width:"100%",overflow:"hidden",members:j});r._summaryGrid=isc.ListGrid.create({editByCell:true,canEditCell:function(t,s){return(s==0)},rowClick:function(){this.selectRecord(0,false);return false},rowDoubleClick:function(){this.selectRecord(0,false);return false},rowContextClick:function(){this.selectRecord(0,false);return false},height:26,leaveScrollbarGap:true,autoFetchData:false,autoFitData:null,showHeader:false,showEmptyMessage:false,bodyOverflow:"hidden"});if(r.title){r.addMember(isc.HTMLFlow.create({contents:'<div class="dataGridTitle">'+r.title+"</div>"}))}if(r._config.isRepeater){}else{r.addMember(r._toolbar);r.addMember(r._advancedFilter)}r.addMember(r.grid);if(r._config.isTree){}else{if(r._config.isRepeater){}else{r.addMember(r._summaryGrid);if(!r.showSummary){r.hideMember(r._summaryGrid)}}}r._flagForm=r._flagDialog.items[0];if(p&&p.name){var e=r._view._grids[p.name];if(e){}else{e={};r._view._grids[p.name]=e}e[r.getID()]=r}},hasDataSource:function(){return(this.grid!=null)},_createGrid:function(b,a){var c=this;var d={autoDraw:true,height:"*",minHeight:c.minHeight,leaveScrollbarGap:true,autoFetchData:false,useAllDataSourceFields:true,showHeader:true,headerHeight:30,showFilterEditor:(c.showFilter&&(!c._config.isTree)&&(!c._config.isRepeater)&&(!c._dataSource.aggregate)&&(!c._advancedFilter.toggleButton.selected)),selectionType:"single",alternateRecordStyles:true,canEdit:true,dataSource:c._dataSource,fields:a,editEvent:"none",neverValidate:false,validateByCell:true,saveByCell:false,validateOnChange:false,canHover:c._config.isRepeater?false:true,canReorderFields:false,autoSaveEdits:true,modalEditing:true,canFreezeFields:false,contextMenu:c._contextMenu,showRollOver:true,canExpandRecords:false,expansionMode:"details",rowClick:function(e,g,f){if(c.isRepeater){}else{if(e&&e.bizId){c._eventRecord=e;c._eventRowNum=g;c._eventColNum=f}}return this.Super("rowClick",arguments)},rowContextClick:function(e,g,f){if(c.isRepeater){}else{if(e&&e.bizId){this.deselectAllRecords();c._eventRecord=e;c._eventRowNum=g;c._eventColNum=f;this.selectSingleRecord(e);return true}}return false},rowDoubleClick:function(e,g,f){if(c.isRepeater){}else{if(e&&e.bizId){c._eventRecord=e;c._eventRowNum=g;c._eventColNum=f;if(b&&b.isPickList){c.pick(c._lookup)}else{if(c.showZoom&&c.canZoom){c._zoomItem.click()}}}}return true},canSelectRecord:function(e){if(c.isRepeater){return false}return true},selectionChanged:function(e,f){if(this.anySelected()){c._zoomButton.setDisabled(!c.canZoom);c._editButton.setDisabled(c._disabled||(!c.canUpdate)||(!c.canEdit));c._pickButton.setDisabled(c._disabled);c.deleteSelectionButton.setDisabled(c._disabled||(!c.canDelete)||(!c.canRemove))}else{c._zoomButton.setDisabled(true);c._editButton.setDisabled(true);c._pickButton.setDisabled(true);c.deleteSelectionButton.setDisabled(true)}c._newButton.setDisabled(c._disabled||(!c.canCreate)||(!c.canAdd))},selectionUpdated:function(f,e){if(c.selectedIdBinding){if(c.selectedIdTrackChanges){c._view._vm.setValue(c.selectedIdBinding,f?f.bizId:null)}else{var g=c._view._vm.valuesHaveChanged();c._view._vm.setValue(c.selectedIdBinding,f?f.bizId:null);if(g){}else{c._view._vm.rememberValues()}}}if(c.bizSelected){if(c.showZoom&&c.canZoom){c.delayCall("bizSelected",[],this.doubleClickDelay)}else{c.bizSelected()}}},editComplete:function(j,f,g,e,i,h){if(c.bizEdited){c.bizEdited()}},filterData:function(i,h,g){var e=i;if(g){if(g.params){}else{g.params={}}}else{g={};g.params={}}if(b.isTree){}else{g.params._summary=c.summaryType}if(c.showTag){g.params._tagId=c.tagId}if(c._view){g.params._c=c._view.gather(false)._c;if(c._view._b){g.params._b=c._view._b}}if(b&&(b.contConv||b.isPickList)){g.params._cc=""}var f=c._advancedFilter.toggleButton.selected?c._advancedFilter.getCriteria():c.grid.getFilterEditorCriteria(true);if(f){}else{f={}}if(b&&b.params){e=isc.BizUtil.completeFilterCriteria(f,b.params,c._view)}this.Super("filterData",[e,h,g]);if(c._advancedFilter.toggleButton.selected){}else{c.grid.setFilterEditorCriteria(f)}},dataProperties:{transformData:function(q,o){if(o.context&&(o.context.operationType=="fetch")&&(o.status==isc.RPCResponse.STATUS_SUCCESS)){var k=[{name:"bizFlagComment",type:"enum",valueMap:["","Count","Avg","Sum","Min","Max"],width:70,change:function(r,l,s,i){c.summaryType=s;c.grid.invalidateCache();c.grid.filterData(c._advancedFilter.toggleButton.selected?c._advancedFilter.getCriteria():c.grid.getFilterEditorCriteria(true))}}];var p=c._dataSource.getFieldNames(true);k.setLength(p.length-1);for(var h=0,f=p.length;h<f;h++){var n=p[h];if((n!="bizTagged")&&(n!="bizFlagComment")){var m=c._dataSource.getField(n);var j="float";var e=null;if((c.summaryType=="Min")||(c.summaryType=="Max")){j=m.type;if((j!="comboBox")&&(j!="enum")&&(j!="select")&&(j!="bizLookupDescription")&&(j!="boolean")){e=m.editorType}}k[h-1]={name:n,type:j,editorType:e,canEdit:false};if(j=="float"){k[h-1].formatCellValue=function(s,i,t,l,r){if(isc.isA.Boolean(s)){return null}return s}}}}c._summaryGrid.setFields(k);var g=q.pop();c._summaryGrid.setData([g]);c.grid.fieldStateChanged();c._summaryGrid.startEditing(0,0,true);c._summaryGrid.selectRecord(0,false)}return q}},canEditCell:function(f,e){return(!c._disabled)&&(e>(c.showTag?1:0))&&this.Super("canEditCell",arguments)},fieldStateChanged:function(){var e=c.getFieldState();if(c.showTag){e[1].width=e[0].width+e[1].width}e.removeAt(0);if(this.canExpandRecords){e[0].width+=30}c._summaryGrid.setFieldState(e)},scrolled:function(){if(c._summaryGrid.body){c._summaryGrid.body.scrollTo(c.grid.body.getScrollLeft(),0)}},getCellCSSText:function(e,g,f){if(e){if(e.bizTagged){return"font-weight:bold;background-color:#B8D1EA;"}}return this.Super("getCellCSSText",arguments)}};if(b.isRepeater){d.showRollOver=false;d.showSelectedStyle=false;d.showEmptyMessage=false;d.baseStyle="";d.showHeader=true;if(b.showColumnHeaders){}else{d.showHeader=false}d.bodyBackgroundColor="white";if(b.showGrid){}else{d.border="none";d.bodyBackgroundColor="#F9F9F9"}}if(!c.autoPopulate){d.emptyMessage="No items shown. Filter the grid."}if(c.cellHeight){d.cellHeight=c.cellHeight}if(b.gridConfig){isc.addProperties(d,b.gridConfig)}if(b.isTree){d.folderIcon=null;d.loadOnDemand=true;d.dataProperties={openProperty:"_isOpen",isFolderProperty:"_isFolder",childrenProperty:"_children"};d.dataFetchMode="paged";c.grid=isc.TreeGrid.create(d)}else{c.grid=isc.ListGrid.create(d)}},setDisabled:function(a){this._disabled=a;if(this.grid){this.grid.selectionChanged()}},setLookup:function(c,b,a){this._lookup=c;this._config.params=b;this._view=a},refresh:function(){var a=this.grid.getVisibleRows()[0];this.grid.deselectAllRecords();this._eventRowNum=null;this._eventColumnNum=null;this._eventRecord=null;this.grid.invalidateCache();this.grid.filterData(this._advancedFilter.toggleButton.selected?this._advancedFilter.getCriteria():this.grid.getFilterEditorCriteria(true));this.grid.scrollToRow(a,"top")},rerender:function(){if(this.isPickList){this.refresh()}},setDataSource:function(e,c){var f=this;f._clearSnap();f._dataSource=isc.DataSource.get(e);f.canCreate=f._dataSource.canCreate;f.canUpdate=f._dataSource.canUpdate;f.canDelete=f._dataSource.canDelete;if(f._dataSource.aggregate){if(f._config.isRepeater){}else{f.hideMember(f._toolbar);if(f._config.isTree){}else{f.hideMember(f._summaryGrid)}}f.canCreate=false;f.canUpdate=false;f.canDelete=false;f.canZoom=false}else{if(f._config.isRepeater){}else{f.showMember(f._toolbar);if(f._config.isTree){}else{f.showMember(f._summaryGrid)}}f.canZoom=true}if(c){f.autoPopulate=true;if(c.autoPopulate!==undefined){f.autoPopulate=c.autoPopulate}}if(f._dataSource.cellHeight){f.cellHeight=f._dataSource.cellHeight}else{f.cellHeight=null}var d=[];if(f.isRepeater||f._dataSource.aggregate){d.add({name:"bizTagged",hidden:true,canHide:false})}else{if(f.showTag){d.add({name:"bizTagged",width:30,align:"center",canHide:false,canSort:false,canToggle:true,canGroupBy:false,showHover:false,recordClick:function(s,n,r,q,i,p,o){if(n){if(f.canUpdate&&f.canEdit){if(f.tagId){f._eventRecord=n;f._eventRowNum=r;f._eventColNum=i;if(n.bizTagged){n.bizTagged="UNTAG"}else{n.bizTagged="TAG"}f.grid.updateData(n,"",{showPrompt:false,params:{_tagId:f.tagId}})}else{isc.warn("Select or create a tag first from the tags menu in the list toolbar")}}}return false}})}else{d.add({name:"bizTagged",hidden:true,canHide:false})}}if(f.isRepeater||f._dataSource.aggregate){d.add({name:"bizFlagComment",hidden:true,canHide:false})}else{d.add({name:"bizFlagComment",width:((!f.showTag)&&f.showSummary)?60:40,align:"center",canHide:false,formatCellValue:function(i){if(i){return'<img src="images/flag.gif">'}else{return""}},recordClick:function(s,n,r,q,i,p,o){if(f.canUpdate&&f.canEdit){f._eventRecord=n;f._eventRowNum=r;f._eventColNum=i;f._flagForm.editRecord(n);f._flagDialog.show()}return false},hoverHTML:function(i,p,q,n,o){return i.bizFlagComment}})}var m=f._dataSource.getFieldNames(true);var g=false;var k=true;for(var b=0;b<m.length;b++){var j=m[b];if((j!="bizTagged")&&(j!="bizFlagComment")){var l=f._dataSource.getField(j);if(l.foreignKey){}else{var a={name:j,autoFitWidth:false,canToggle:false};if(k){a.treeField=true;k=false}if(l.canSave==false){a.canEdit=false}g=(g||l.detail);d.add(a)}}}f._advancedFilter.setDataSource(f._dataSource);f._flagForm.setDataSource(f._dataSource);f._flagForm.setFields([{name:"bizFlagComment",type:"richText",height:175,validators:[{type:"lengthRange",min:0,max:1024,clientOnly:true}]}]);if(f.grid){f.removeMember(f.grid);f.grid.destroy()}f._createGrid(f._config,d);f.grid.setCanExpandRecords(g);if(f._config.isTree||f._config.isRepeater){f.addMember(f.grid)}else{f.addMember(f.grid,f.getMembers().length-1)}if(f.rootIdBinding){f.grid.getDataSource().getField("bizParentId").rootValue="_"+f._view._vm.getValue(f.rootIdBinding)}else{var h=f.grid.getDataSource().getField("bizParentId");if(h){h.rootValue=null}}if(f.autoPopulate){f.grid.filterData()}f.grid.selectionChanged(null,false);return f._dataSource.getTitle()},getFieldState:function(){var fieldState=eval(this.grid.getFieldState());for(var i=0,l=fieldState.length;i<l;i++){if(fieldState[i].width){continue}else{fieldState[i].width=this.grid.getFieldWidth(fieldState[i].name)}}if(this.grid.filterEditor){this.grid.filterEditor.setFieldState(fieldState)}return fieldState},zoom:function(h,d,e){var f=this;var c=null;var g=null;var i=null;if((!h)&&f._eventRecord){c=f._eventRecord.bizModule;g=f._eventRecord.bizDocument;i=f._eventRecord.bizId}else{var b=this.grid.dataSource.modoc.indexOf(".");c=this.grid.dataSource.modoc.substring(0,b);g=this.grid.dataSource.modoc.substring(b+1)}var a=f.grid.body.getPageRect();isc.BizUtil.getEditView(c,g,function(k){if(f._view){var j=f._view.gather(false);if(d){f._view._source=f._dataSource.ID.substring(f._dataSource.ID.lastIndexOf("_")+1);f._zoom(h,k,e,i,j._c,a)}else{if(j._apply||f._view._vm.valuesHaveChanged()){delete j._apply;f._view.saveInstance(true,null,function(){f._view._source=f._dataSource.ID.substring(f._dataSource.ID.lastIndexOf("_")+1);f._zoom(h,k,e,i,null,a)})}else{f._view._source=f._dataSource.ID.substring(f._dataSource.ID.lastIndexOf("_")+1);f._zoom(h,k,e,i,null,a)}}}else{f._zoom(h,k,e,i,null,a)}})},_zoom:function(a,b,g,f,c,d){if(a){isc.WindowStack.popup(d,"New",true,[b]);b.newInstance(g,null,c)}else{var e=[d[0],this.grid.body.getRowPageTop(this._eventRowNum),d[2],this.grid.body.getRowSize(this._eventRowNum)];isc.WindowStack.popup(e,"Edit",true,[b]);b.editInstance(f,null,c)}},pick:function(a){if(this._eventRecord){a.setValueMapFromPickList(this._eventRecord);a.setValue(this._eventRecord.bizId);a.bizPicked(a.form,a,this._eventRecord.bizId)}isc.WindowStack.popoff(false);if(this._eventRecord){if(a.changedForServer){a.changedForServer(a.form,a,this._eventRecord.bizId)}this._eventRecord=null}}});isc.ClassFactory.defineClass("BizDataGrid","BizGrid");isc.BizDataGrid.addProperties({_newButton:null,_zoomButton:null,_editButton:null,showAdd:true,showZoom:true,showEdit:true,showRemove:true,showDeselect:true,_mod:null,_doc:null,_b:null,_ordinal:null});isc.BizDataGrid.addMethods({initWidget:function(b){this.Super("initWidget",arguments);var j=this;var g={title:"New",icon:"../images/icons/new.png",enableIf:function(l,m,k){return((!j._disabled)&&j.canCreate&&j.canAdd)},click:function(){if(b.inline){j.add()}else{j.zoom(true)}}};var c={title:"Zoom",icon:"../images/icons/zoom.gif",click:function(){j.zoom(false)},enableIf:function(l,m,k){return(j.canZoom&&j.grid.anySelected())}};var f={title:"Edit",icon:"../images/icons/edit.png",enableIf:function(l,m,k){return((!j._disabled)&&j.canUpdate&&j.canEdit&&j.grid.anySelected())},click:function(){if(j.grid.anySelected()){j.grid.startEditing(j._eventRowNum,j._eventColNum)}}};j._newButton=isc.BizUtil.createImageButton(g.icon,true,"<b>New</b> record.",g.click);j._zoomButton=isc.BizUtil.createImageButton(c.icon,true,"<b>Zoom</b> into record.",c.click);j._zoomButton.setDisabled(true);j._editButton=isc.BizUtil.createImageButton(f.icon,true,"<b>Edit</b> a record inline.",f.click);j._editButton.setDisabled(true);var a=[];if(b.editable){if(j.showAdd){a.add(g)}if(j.showZoom){a.add(c)}if(j.showEdit){a.add(f)}if(j.showRemove){a.add(this.deleteSelectionItem)}if(j.showDeselect){if(a.length>0){a.add({isSeparator:true})}a.add(this.clearSelectionItem)}}var e=isc.Menu.create({showShadow:true,shadowDepth:10,data:a});var h=true;if(j.isRepeater){if(j.showColumnHeaders){}else{h=false}}j.grid=isc.ListGrid.create({height:"*",minHeight:j.minHeight,autoFetchData:false,showHeader:h,headerHeight:30,showFilterEditor:false,showRollOver:(!j.isRepeater),showSelectedStyle:(!j.isRepeater),showEmptyMessage:(!j.isRepeater),baseStyle:j.isRepeater?"":null,border:j.isRepeater?(j.showGrid?null:"none"):null,bodyBackgroundColor:j.isRepeater?(j.showGrid?"white":"#F9F9F9"):"white",fields:j._fields,selectionType:"single",alternateRecordStyles:true,canEdit:j.canUpdate&&j.canEdit,editEvent:"none",neverValidate:false,validateByCell:true,saveByCell:false,validateOnChange:false,canHover:j.isRepeater?false:true,wrapCells:j.wordWrap?true:false,fixedRecordHeights:j.wordWrap?false:true,canReorderFields:false,canSort:(b._ordinal?false:true),canGroupBy:(b._ordinal?false:true),canReorderRecords:(b._ordinal?((b.canUpdate&&j.canEdit)?true:false):false),recordsDropped:function(n,l,m,k){this.reorderData()},reorderData:function(){if(b._ordinal){var n=this.getData();for(var m=0,k=n.length;m<k;m++){n[m][b._ordinal]=m+1}}},dragDataAction:"move",autoSaveEdits:true,modalEditing:true,canFreezeFields:false,contextMenu:e,showRollOver:true,rowClick:function(k,m,l){if(k&&k.bizId){j._eventRecord=k;j._eventRowNum=m;j._eventColNum=l}return this.Super("rowClick",arguments)},rowContextClick:function(k,m,l){if(k&&k.bizId){this.deselectAllRecords();j._eventRecord=k;j._eventRowNum=m;j._eventColNum=l;this.selectSingleRecord(k);return true}return false},rowDoubleClick:function(k,m,l){if(b.editable){if((!k)||k.isFolder){}else{j._eventRecord=k;j._eventRowNum=m;j._eventColNum=l;this.selectSingleRecord(k);if(b.inline){if(j.canUpdate&&j.canEdit&&j.showEdit&&(!j._disabled)){this.startEditing(m,l,false)}}else{if(j.canZoom&&j.showZoom){j.zoom(false)}}}}return this.Super("rowDoubleClick",arguments)},selectionChanged:function(k,l){if(this.anySelected()){j._zoomButton.setDisabled(!j.canZoom);j._editButton.setDisabled(j._disabled||(!j.canUpdate)||(!j.canEdit));j.deleteSelectionButton.setDisabled(j._disabled||(!j.canDelete)||(!j.canRemove))}else{j._zoomButton.setDisabled(true);j._editButton.setDisabled(true);j.deleteSelectionButton.setDisabled(true)}j._newButton.setDisabled(j._disabled||(!j.canCreate)||(!j.canAdd))},selectionUpdated:function(l,k){if(j.selectedIdBinding){if(j.selectedIdTrackChanges){j._view._vm.setValue(j.selectedIdBinding,l?l.bizId:null)}else{var m=j._view._vm.valuesHaveChanged();j._view._vm.setValue(j.selectedIdBinding,l?l.bizId:null);if(m){}else{j._view._vm.rememberValues()}}}if(j.bizSelected){if(j.showZoom&&j.canZoom&&b.editable){j.delayCall("bizSelected",[],this.doubleClickDelay)}else{j.bizSelected()}}},canEditCell:function(l,k){return(!j._disabled)&&this.Super("canEditCell",arguments)},editComplete:function(o,l,m,k,n){j._view._vm.setValue("_changed",true);j._view._vm.setValue("_apply",true);if(j.bizEdited){j.bizEdited()}}});var d=j._view._grids[j._b];if(d){}else{d={};j._view._grids[j._b]=d}d[j.getID()]=j;if(j.title){j.addMember(isc.HTMLFlow.create({contents:'<div class="dataGridTitle">'+j.title+"</div>"}))}if(b.editable){if(b.isRepeater){}else{var i=[];if(j.showAdd){i.add(j._newButton)}if(j.showZoom){i.add(j._zoomButton)}if(j.showEdit){i.add(j._editButton)}if(j.showRemove){i.add(j.deleteSelectionButton)}if(j.showDeselect){if(i.length>0){i.add("separator")}i.add(isc.BizUtil.createImageButton(j.clearSelectionItem.icon,false,"<b>Deselect</b> all.",j.clearSelectionItem.click))}if(i.length>0){j.addMember(isc.ToolStrip.create({membersMargin:2,layoutMargin:2,width:"100%",members:i}))}}}j.addMember(j.grid)},setDisabled:function(a){this._disabled=a;if(this.grid){this.grid.selectionChanged()}},zoom:function(a){var c=this;var b=(this._eventRecord?this._eventRecord.bizModule:this._mod);var d=(this._eventRecord?this._eventRecord.bizDocument:this._doc);isc.BizUtil.getEditView(b,d,function(f){var k=((c._view._b)?c._view._b+"."+c._b:c._b);var i=(a?null:c._eventRecord.bizId);var e=c._view.gather(true);if(e){var h=c.grid.body.getPageRect();var g=c.grid.body.getRowPageTop(c._eventRowNum);var j=c.grid.body.getRowSize(c._eventRowNum);if(e._apply||c._view._vm.valuesHaveChanged()){delete e._apply;c._view.saveInstance(true,null,function(){c._zoom(a,i,k,f,e._c,h,g,j)})}else{c._zoom(a,i,k,f,e._c,h,g,j)}}else{isc.warn("You cannot zoom in until you fix the problems found")}})},_zoom:function(h,d,i,g,f,b,c,a){if(h){isc.WindowStack.popup(b,"New",false,[g])}else{var e=[b[0],c,b[2],a];isc.WindowStack.popup(e,"Edit",false,[g])}g.editInstance(d,i,f,true)},add:function(){this.grid.startEditingNew({bizId:null})},remove:function(a){var b=this.grid.data;b.removeAt(b.findIndex("bizId",a));this.grid.deselectAllRecords();this._eventRowNum=null;this._eventColumnNum=null;this._eventRecord=null}});isc.defineClass("ListView");isc.ListView.addClassProperties({_heading:isc.HTMLFlow.create({showEdges:true}),contents:isc.VLayout.create({width:"100%",height:"100%",overflow:"auto",membersMargin:2,layoutMargin:2,margin:2,rerender:function(){if(isc.ListView._grid&&isc.ListView._grid.isVisible()){isc.ListView._grid.refresh()}else{if(isc.ListView._calendar&&isc.ListView._calendar.isVisible()){isc.ListView._calendar.refresh()}else{if(isc.ListView._tree&&isc.ListView._tree.isVisible()){isc.ListView._tree.refresh()}else{if(isc.ListView._map&&isc.ListView._map.isVisible()){isc.ListView._map.rerender()}}}}},resume:function(){if(isc.ListView._grid&&isc.ListView._grid.isVisible()){}else{if(isc.ListView._calendar&&isc.ListView._calendar.isVisible()){}else{if(isc.ListView._tree&&isc.ListView._tree.isVisible()){}else{if(isc.ListView._map&&isc.ListView._map.isVisible()){isc.ListView._map.resume()}}}}}}),_grid:null,_calendar:null,_tree:null,_map:null,_portal:isc.PortalLayout.create({width:"100%",height:"100%",getDropPortlet:function(g,c,h,e){if(g.isA("TreeGrid")&&g.getID().endsWith("Tree")){var f=g.getDragData()[0];var i=isc.Portlet.create({title:f.desc,items:[]});if(f.ref=="edit"){isc.BizUtil.getEditView(g.data.root.name,f.name,function(k){i.addItem(k);k.newInstance(null,null,null,null,function(){k.hideMember(k._heading)})})}else{if(f.ref=="grid"){var a=isc.BizUtil.createListGrid();i.addItem(a);a.setDataSource(g.data.root.name+"_"+f.name,f.config)}else{if(f.ref=="cal"){var d=isc.BizUtil.createCalendar();i.addItem(d);d.setDataSource(g.data.root.name+"_"+f.name)}else{if(f.ref=="tree"){var j=isc.BizUtil.createTreeGrid();i.addItem(j);j.setDataSource(g.data.root.name+"_"+f.name,f.config)}else{if(f.ref=="map"){var b=isc.BizUtil.createMap();i.addItem(b);b.setDataSource(g.data.root.name+"_"+f.name)}else{alert("Menu ref of "+f.ref+"is unknown")}}}}}return i}else{return this.Super("getDropPortlet",arguments)}}}),_setHeading:function(d,b,c,f){var a="";if(b){a='<img style="width:32px;height:32px" src="resources?_doc='+f+"&_n="+b+"&v="+SKYVE.Util.v+'"/>'}else{if(c){a='<i style="padding-left:5px;font-size:28px;width:32px !important" class="titleBar bizhubFontIcon '+c+'"></i>'}}var e=isc.BizUtil.headerTemplate;e=e.replace("{icon}",a).replace("{title}",d).replace("{link}","");isc.ListView._heading.setContents(e)},setGridDataSource:function(ID,menuConfig){if(isc.ListView._grid){}else{isc.ListView._grid=isc.BizUtil.createListGrid();isc.ListView.contents.addMember(isc.ListView._grid)}if(isc.ListView._calendar){isc.ListView.contents.hideMember(isc.ListView._calendar)}if(isc.ListView._tree){isc.ListView.contents.hideMember(isc.ListView._tree)}if(isc.ListView._map){isc.ListView.contents.hideMember(isc.ListView._map)}isc.ListView.contents.hideMember(isc.ListView._portal);isc.ListView.contents.showMember(isc.ListView._grid);var ds=eval(ID);var title=isc.ListView._grid.setDataSource(ds,menuConfig);isc.ListView._setHeading(title,ds.icon,ds.fontIcon,ds.modoc)},setCalendarDataSource:function(ID,menuConfig){if(isc.ListView._calendar){}else{isc.ListView._calendar=isc.BizUtil.createCalendar();isc.ListView.contents.addMember(isc.ListView._calendar)}if(isc.ListView._grid){isc.ListView.contents.hideMember(isc.ListView._grid)}if(isc.ListView._tree){isc.ListView.contents.hideMember(isc.ListView._tree)}if(isc.ListView._map){isc.ListView.contents.hideMember(isc.ListView._map)}isc.ListView.contents.hideMember(isc.ListView._portal);isc.ListView.contents.showMember(isc.ListView._calendar);var ds=eval(ID);isc.ListView._calendar.setDataSource(ds);isc.ListView._setHeading("NOT IMPLEMENTED",ds.icon,ds.fontIcon,ds.modoc)},setTreeDataSource:function(ID,menuConfig){if(isc.ListView._tree){}else{isc.ListView._tree=isc.BizUtil.createTreeGrid();isc.ListView.contents.addMember(isc.ListView._tree)}if(isc.ListView._grid){isc.ListView.contents.hideMember(isc.ListView._grid)}if(isc.ListView._calendar){isc.ListView.contents.hideMember(isc.ListView._calendar)}if(isc.ListView._map){isc.ListView.contents.hideMember(isc.ListView._map)}isc.ListView.contents.hideMember(isc.ListView._portal);isc.ListView.contents.showMember(isc.ListView._tree);var ds=eval(ID);var title=isc.ListView._tree.setDataSource(ds,menuConfig);isc.ListView._setHeading(title,ds.icon,ds.fontIcon,ds.modoc)},setMapDataSource:function(a,b){if(isc.ListView._map){}else{isc.ListView._map=isc.BizUtil.createMap();isc.ListView.contents.addMember(isc.ListView._map)}if(isc.ListView._grid){isc.ListView.contents.hideMember(isc.ListView._grid)}if(isc.ListView._calendar){isc.ListView.contents.hideMember(isc.ListView._calendar)}if(isc.ListView._tree){isc.ListView.contents.hideMember(isc.ListView._tree)}isc.ListView.contents.hideMember(isc.ListView._portal);isc.ListView.contents.showMember(isc.ListView._map);isc.ListView._map.setDataSource(a);isc.ListView._setHeading("MAP","shared/icons/Home.png","fa fa-globe fa-2x","")},showPortal:function(){if(isc.ListView._grid){isc.ListView.contents.hideMember(isc.ListView._grid)}if(isc.ListView._calendar){isc.ListView.contents.hideMember(isc.ListView._calendar)}if(isc.ListView._tree){isc.ListView.contents.hideMember(isc.ListView._tree)}if(isc.ListView._map){isc.ListView.contents.hideMember(isc.ListView._map)}isc.ListView.contents.showMember(isc.ListView._portal);isc.ListView._setHeading("DASHBOARD","shared/icons/Home.png","fa fa-home fa-2x","")}});isc.ListView.contents.addMember(isc.ListView._heading);isc.ListView.contents.addMember(isc.ListView._portal);isc.ListView.contents.hideMember(isc.ListView._portal);isc.ClassFactory.defineClass("BizContainer","VLayout");isc.BizContainer.addMethods({initWidget:function(){this.backgroundImage="background.png";this.backgroundRepeat="repeat";this.Super("initWidget",arguments);this.contained=[]},addContained:function(a){this.contained.add(a);this.addMember(a)},removeContained:function(a){this.contained.remove(a);this.removeMember(a)}});isc.ClassFactory.defineClass("EditView","BizContainer");isc.EditView.addClassProperties({_DATA_SOURCE:isc.RestDataSource.create({dataFormat:"json",dataURL:"smartedit",sendExtraFields:false})});isc.EditView.addMethods({initWidget:function(){this.overflow="hidden";this.membersMargin=2;this.layoutMargin=2;this.margin=2;this._grids={};this._refreshedGrids={};this.Super("initWidget",arguments);this._heading=isc.HTMLFlow.create({showEdges:true});this.addMember(this._heading);this._actionPanel=isc.ToolStrip.create({layoutMargin:2,membersMargin:5,width:"100%"});this.addMember(this._actionPanel);this._editPanel=isc.BizContainer.create({layoutMargin:2,membersMargin:10,overflow:"auto"});this.addMember(this._editPanel);var a=this;this._vm=isc.ValuesManager.create({dataSource:isc.EditView._DATA_SOURCE,handleHiddenValidationErrors:function(o){var e=[];for(var h in o){var q=o[h];var j=h.split("__");if(j.length==2){var p=j[0].lastIndexOf("_");if(p>-1){var k=j[0].substring(0,p);var d=a._grids[k];if(d){var n=parseInt(j[0].substring(p+1));if(isc.isA.Number(n)){for(var g in d){var b=d[g];if(b){if(b.grid){b.grid.setFieldError(n,j[1],q);b.grid.markForRedraw()}}}}}}}if(!e.contains(q)){e.add(q)}}if(e.length>0){var m="<ul>";for(var f=0,c=e.length;f<c;f++){m+="<li>"+e[f]+"</li>"}m+="</ul>";isc.warn(m,null,{title:"Problems"})}return false},saveEditorValues:function(c,b,e,d){d.oldValues=null;this.Super("saveEditorValues",arguments)}})},addContained:function(a){this._editPanel.addContained(a)},addEditAction:function(a){a.forCreate=false;this._actionPanel.addMember(a)},addCreateAction:function(a){a.forCreate=true;this._actionPanel.addMember(a)},addAction:function(a){a.forCreate=null;this._actionPanel.addMember(a)},toDisplay:function(expression,instance){var tokens=expression.match(/\{[A-Za-z0-9._]+\}/g);if(tokens){for(var i=0;i<tokens.length;i++){var token=tokens[i];var binding=token.substring(1,token.length-1).replaceAll(".","_");var evaluation=eval("instance."+binding);if("undefined"===typeof(evaluation)){evaluation=""}else{if((evaluation==null)||(evaluation=="null")||(evaluation=="undefined")){evaluation=""}else{if(evaluation.toDateStamp){evaluation=evaluation.toDateStamp();evaluation=evaluation.substring(0,4)+"-"+evaluation.substring(4,6)+"-"+evaluation.substring(6,11)+":"+evaluation.substring(11,13)+":"+evaluation.substring(13,15)+".000"}else{if(evaluation.toString){evaluation=evaluation.toString()}}}}expression=expression.replace(token,evaluation)}}return expression},rerender:function(){var a=this.gather(false);if(a){this._editInstance("ZoomOut",a.bizId,this._b,a._c,this._openedFromDataGrid)}},resume:function(){for(var b in this._grids){var d=this._grids[b];for(var a in d){var c=d[a];if(c.webmap){c.resume()}}}},newInstance:function(d,a,e,h,b){this._openedFromDataGrid=h;if(this._vm.members){this.hide();this._b=a;var g=this;var c={_mod:this._mod,_doc:this._doc,_ecnt:this._ecnt,_ccnt:this._ccnt};if(a){c._b=a}if(e){c._c=e}if(d){for(var f in d){var i=d[f];c[f]=i}}this._vm.fetchData(null,function(l,m,k){var j={};if(l.status>=0){g._vm.setSaveOperationType("add");j=m[0];g.scatter(j);if(h){g._b+="ElementById("+i.bizId+")"}if(b){b(m)}}else{if(l.status==-1){isc.warn(m,null,{title:"Problems"})}}g.show();g.refreshListGrids(true,true,j);if(g.opened){g.opened(m)}},{httpMethod:"POST",params:c,willHandleError:true})}},editInstance:function(c,e,b,d,a){this._saved=false;this._editInstance(null,c,e,b,d,a)},_editInstance:function(e,d,h,b,g,a){this._openedFromDataGrid=g;if(this._vm.members){this.hide();this._b=h;var f={bizId:d,_mod:this._mod,_doc:this._doc,_ecnt:this._ecnt,_ccnt:this._ccnt};if(e){f._a=e}if(h){f._b=h}if(b){f._c=b}if(this._source){f._s=this._source;this._source=null}var c=this;this._vm.fetchData(null,function(l,m,j){var i={};if(l.status>=0){i=m[0];c.scatter(i);if(g){if(c._b.endsWith(")")){}else{c._b+="ElementById("+i.bizId+")"}}if(a){a(m)}}else{if(l.status==-1){isc.warn(m,null,{title:"Problems"})}}if(e=="ZoomOut"){var k=c._vm.valuesHaveChanged();c._vm.setValue("_apply",true);if(k){}else{c._vm.rememberValues()}}else{if(d){}else{var k=c._vm.valuesHaveChanged();c._vm.setValue("_apply",true);if(k){}else{c._vm.rememberValues()}}}c.show();c.refreshListGrids(true,(!e),i);if(c.opened){c.opened(m)}},{httpMethod:"POST",params:f,willHandleError:true})}else{this._source=null}},rerenderAction:function(b,a){this._source=a;this.saveInstance(b,null);this._saved=true},rerenderBlurryAction:function(b,a){this.delayCall("_rerenderBlurryAction",[b,a],100)},_rerenderBlurryAction:function(c,b){this._source=b;var a=this;this.saveInstance(c,null,function(){if(a._blurry){var d=a._blurry;a._blurry=null;if(d.action){d.delayCall("action")}}});this._saved=true},saveInstance:function(g,e,b){var a=this.gather(g);if(a){var c=a._c;delete a._c;var f={_mod:this._mod,_doc:this._doc,_ecnt:this._ecnt,_ccnt:this._ccnt,bean:a,bizId:a.bizId,_c:c};if(e){f._a=e;if(e=="_PUSH"){e=null}}if(this._b){f._b=this._b}if(this._source){f._s=this._source;this._source=null}var d=this;this._vm.disableValidation=true;this._vm.saveData(function(q,j,m){if(q.status>=0){var l=null;var n=isc.WindowStack.getOpener();if(e=="ZoomOut"){var p=n.gather(false);p._c=j._c;var o=d._b;var k=o.lastIndexOf(".");if(k>=0){o=o.substring(k+1)}if(o.endsWith(")")){var k=o.lastIndexOf("ElementById");if(k>=0){o=o.substring(0,k)}}var i=n._b;if(i&&i.endsWith(")")){var k=i.lastIndexOf("ElementById");if(k>=0){i=i.substring(0,k)}}var h=p[o];n._source=o;if(isc.isAn.Array(h)){isc.WindowStack.popoff(true);n._source=null;return}else{p[o]=j.bizId;l=n._vm.getItem(o);if(l){if(a.bizId){l.bizEdited(l.form,l,j.bizId)}else{l.bizAdded(l.form,l,j.bizId)}}}n._vm.setValues(p);delete j._c;delete j._title}if(e){if(e=="Save"){d._saved=true;d.scatter(j);d.refreshListGrids(true,false,j)}else{if(l){if(a.bizId){if(l.bizEditedForServer){isc.WindowStack.popoff(false);l.bizEditedForServer(l.form,l,j.bizId);n._source=null}else{isc.WindowStack.popoff(true);n._source=null}}else{if(l.bizAddedForServer){isc.WindowStack.popoff(false);l.bizAddedForServer(l.form,l,j.bizId);n._source=null}else{isc.WindowStack.popoff(true);n._source=null}}}else{isc.WindowStack.popoff(true);n._source=null}}}else{d.scatter(j);d.refreshListGrids(true,false,j)}if(b){b(j)}}else{if(q.status==-1){isc.warn(j,null,{title:"Problems"})}}},{params:f,willHandleError:true});this._vm.disableValidation=false}else{this._source=null}},deleteInstance:function(d,b){var a=this.gather(d);if(a){var c=a._c;delete a._c;isc.EditView._DATA_SOURCE.removeData(a,function(f,g,e){if(f.status>=0){isc.WindowStack.popoff(true);if(b){b(g)}}else{if(f.status==-1){isc.warn(g,null,{title:"Problems"})}}},{params:{_mod:this._mod,_doc:this._doc,_c:c},willHandleError:true})}},doAction:function(e,j,i,f,b,g,c){var k=this.gather(j);if(k){var a=k._c;delete k._c;var d={_mod:(f?f:this._mod),_doc:(b?b:this._doc),_ecnt:this._ecnt,_ccnt:this._ccnt,bean:k,bizId:(g?g:k.bizId),_c:a};if(e){d._a=e}if(this._b){d._b=this._b}if(i){d._g=i}var h=this;this._vm.disableValidation=true;this._vm.saveData(function(m,n,l){if(m.status>=0){h._saved=true;h.scatter(n);h.refreshListGrids(true,false,n);if(c){c(n)}if(n._redirectUrl){window.location.assign(n._redirectUrl)}}else{if(m.status==-1){isc.warn(n,null,{title:"Problems"})}}return true},{params:d,willHandleError:true});this._vm.disableValidation=false}},doBlurryAction:function(a,b){this.delayCall("_doBlurryAction",[a,b],100)},_doBlurryAction:function(b,c){var a=this;this.doAction(b,c,null,null,null,null,function(){if(a._blurry){var d=a._blurry;a._blurry=null;if(d.action){d.delayCall("action")}}})},scatter:function(O){this._vm.clearErrors(true);this._vm.clearValues();var b="";if(O.persisted){b='<a target="_top" href="?a=e&m='+this._mod+"&d="+this._doc+"&i="+O.bizId+'" title="Link" class="dhtmlPageButton"><i class="fa fa-2x fa-thumb-tack"></i></a>'}var a=isc.BizUtil.headerTemplate;var e="";if(this._icon){e='<img style="width:32px;height:32px" src="resources?_doc='+this._mod+"."+this._doc+"&_n="+this._icon+"&v="+SKYVE.Util.v+'"/>'}else{if(this._fontIcon){e='<i style="padding-left:5px;font-size:28px;width:32px !important" class="titleBar bizhubFontIcon '+this._fontIcon+'"></i>'}}a=a.replace("{icon}",e).replace("{title}",O._title).replace("{link}",b);this._heading.setContents(a);delete O._title;var u=O._valueMaps;delete O._valueMaps;var g=O._growls;delete O._growls;var q=O._messages;delete O._messages;var z=[];this._processWidgets(this._editPanel,false,O,u,z);this._vm.setValues(O);for(var I=0,F=z.length;I<F;I++){z[I].rerender()}for(var o in this._grids){var M=O[o];var w=this._grids[o];for(var N in w){var C=w[N];if(M&&isc.isAn.Array(M)){if(C._comparisonTree&&C._comparisonForm){C.setData(M)}else{if(C._candidateList&&C._memberList){var E=[];if(u){var J=u[o];if(J){for(var p in J){var D=J[p];var h=M.find("bizId",p);if(h){h.bizKey=D}else{E.push({bizId:p,bizKey:D})}}}}C.setData(E,M)}else{if(C.grid){var L=C.grid.fields;for(var H=0,G=L.length;H<G;H++){var y=L[H];var P=y.type;var t=P.contains("YYYY");var r=P.contains("HH");if(t||r){var f=y.name;for(var I=0,F=M.length;I<F;I++){var n=M[I];var D=n[f];if(D){if(t){n[f]=Date.parseSchemaDate(D)}else{if(r){n[f]=isc.Time.parseInput(D)}}}}}else{if(y.valueMap){if(u){var J=u[o+"_"+y.name];if(J){y.valueMap=J}}}}}C.grid.setData(M);if(C.selectedIdBinding){var m=O[C.selectedIdBinding];if(m){var x=M.findIndex("bizId",m);if(x>=0){var K=C.grid.selectionUpdated;C.grid.selectionUpdated=null;C.grid.selectSingleRecord(x);C.grid.selectionUpdated=K}}}}}}}}}var v=isc.BizUtil.getCurrentView()==this;var A=this._actionPanel.getMembers();if(A.length==0){this._actionPanel.hide()}for(var I=0,F=A.length;I<F;I++){var s=A[I];if(O.created&&(s.forCreate!=null)&&s.forCreate){this._showHide(s,this._actionPanel,O,true);continue}else{if(O.notCreated&&(s.forCreate!=null)&&(!s.forCreate)){this._showHide(s,this._actionPanel,O,true);continue}}this._enableDisable(s,this._actionPanel,O);if(s.actionName){if(this._b){this._showHide(s,this._actionPanel,O,(s.type=="O")||(s.type=="S")||(s.type=="C")||(s.type=="D")||((s.type=="R")&&((this._openedFromDataGrid===undefined)||(!this._openedFromDataGrid))))}else{this._showHide(s,this._actionPanel,O,(s.type=="Z")||(s.type=="R")||((!O.persisted)&&(s.type=="D"))||(v&&(s.type=="D"))||(v&&(s.type=="O"))||(v&&(s.type=="C")))}}}if(g){isc.BizUtil.growl(g)}if(q){var d=false;var B=(q.length>1)?"<ul>":"";for(var I=0,F=q.length;I<F;I++){var c=q[I];if(c.severity!="info"){d=true}if(F>1){B+="<li>"}B+=c.summary;if(F>1){B+="</li>"}}if(q.length>1){B+="</ul>"}if(d){isc.warn(B)}else{isc.say(B)}}},refreshListGrids:function(i,g,h){if(i){this._refreshedGrids={}}for(var d in this._grids){var b=this._grids[d];for(var e in b){var a=b[e];if(this._refreshedGrids[e]){}else{if(a.isVisible()){if(a.webmap){if(g||(a.postRefreshConditionName===undefined)||this._evaluateConditionName(a.postRefreshConditionName,h)){a.rerender()}this._refreshedGrids[e]=true}else{if(a.rootIdBinding){if(a.hasDataSource()){if(g||(a.postRefreshConditionName===undefined)||this._evaluateConditionName(a.postRefreshConditionName,h)){var c=a.grid.getDataSource().getField("bizParentId").rootValue;var f="_"+a._view._vm.getValue(a.rootIdBinding);if(c!=f){a.setDataSource(a.dataSource)}else{if(a.autoPopulate){a.refresh()}}}}else{a.setDataSource(a.dataSource)}this._refreshedGrids[e]=true}else{if(a.dataSource){if(g||(a.postRefreshConditionName===undefined)||this._evaluateConditionName(a.postRefreshConditionName,h)){if(a.hasDataSource()){if(a.autoPopulate){a.refresh()}}else{a.setDataSource(a.dataSource)}}this._refreshedGrids[e]=true}}}}}}}},gather:function(b){var a=null;if(b){if(this._vm.validate()){a=this._gather()}}else{a=this._gather()}return a},_gather:function(){var p=this._vm.getValues();for(var j in this._grids){var g=p[j];if(isc.isAn.Array(g)&&(g.length>0)){if(g[0].properties){var o=this._grids[j];for(var b in o){p[j]=o[b].getData()}}else{var d=this._grids[j];for(var k in d){var a=d[k];var m=[];var h=a.grid;if(h){m=h.fields;h.reorderData();g=g.sortByProperty(a._ordinal,true)}if((a._candidateList&&a._memberList)||((m.length==1)&&(m[0].name=="bizId")&&(m[0].type=="enum"))){if(a._ordinal){a._memberList.reorderData();g=g.sortByProperty(a._ordinal,true)}var e=[];p[j]=e;for(var f=0,c=g.length;f<c;f++){var n=g[f];e.push(n.bizId)}}}}}}return p},_evaluateConditionName:function(c,b){var a=false;if(c){a=((c=="true")?true:((c=="false")?false:b[c]))}return a},_processWidgets:function(g,k,a,c,r){for(var s=0,p=g.contained.length;s<p;s++){var t=g.contained[s];this._enableDisable(t,g,a);var h=k||this._showHide(t,g,a,false);if(isc.isA.Function(t.addContained)){this._processWidgets(t,h,a,c,r)}if(isc.isA.Function(t.addBizTab)){var b=t.getSelectedTabNumber();for(var q=0,o=t.bizTabs.length;q<o;q++){var d=t.bizTabs[q];var f=h||this._showHide(d,t,a,false);this._enableDisable(d,t,a);this._processWidgets(d.pane,f,a,c,r)}var v=t.selectedTabIndexBinding;if(v){if((a[v]!==undefined)&&(a[v]!=null)){b=a[v]}}if((b!==undefined)&&(b!=null)){t.selectTab(b)}}if(isc.isA.Function(t.getItems)){if(h){if(this._vm.members&&this._vm.members.contains(t)){this._vm.removeMember(t)}}else{if((this._vm.members==null)||(!this._vm.members.contains(t))){this._vm.addMember(t)}}var n=t.items;for(var q=0,o=n.length;q<o;q++){var u=n[q];this._enableDisable(u,t,a);if(!this._showHide(u,t,a,false)){if(u.type=="bizLookupDescription"){u.setValueMapFromEditView(a)}else{if((u.type=="select")||(u.type=="enum")||(u.type=="comboBox")){if(u.optionDataSource){if(u.optionDataSource==isc.BizUtil.PREVIOUS_VALUES_DATA_SOURCE){var e={};e[a[u.name]]=a[u.name];u.setValueMap(e)}else{u.fetchData();var e={};e[a[u.name]]=a[u.name+"_"+u.displayField];u.setValueMap(e)}}else{if(c){var e=c[u.name];if(e){u.setValueMap(e)}}}}}}}}if(isc.isA.Function(t.rerender)){r.add(t)}}},_enableDisable:function(c,b,a){if(c.disablePickConditionName){c.canPick=!this._evaluateConditionName(c.disablePickConditionName,a);c.enableDisablePick()}if(c.disableAddConditionName){c.canAdd=!this._evaluateConditionName(c.disableAddConditionName,a)}if(c.disableZoomConditionName){c.canZoom=!this._evaluateConditionName(c.disableZoomConditionName,a)}if(c.disableEditConditionName){c.canEdit=!this._evaluateConditionName(c.disableEditConditionName,a)}if(c.disableRemoveConditionName){c.canRemove=!this._evaluateConditionName(c.disableRemoveConditionName,a)}if(c.disableClearConditionName){c.canClear=!this._evaluateConditionName(c.disableClearConditionName,a)}this._setDisabled(c,b,c.disabledConditionName,a)},_setDisabled:function(f,e,g,b){var d=this._evaluateConditionName(g,b);if(f.bizRequired&&f.setRequired&&f.isVisible&&f.isVisible()){f.setRequired(!d)}if(f.setDisabled){f.setDisabled(d)}else{if(f.enable&&f.disable){if(d){f.disable()}else{f.enable()}}else{if(e&&e.enableTab&&e.disableTab&&f.pane){var c=e.tabForPane(f.pane);var a=e.getTabNumber(c);if(a>=0){if(d){e.disableTab(c)}else{e.enableTab(c)}}}}}},setDisabled:function(c,d){var b=this._vm.getItem(c);if(b){var a=this.gather(false);this._setDisabled(b,null,d,a)}},toggleDisabled:function(b){var a=this._vm.getItem(b);if(a){this._setDisabled(a,null,a.isDisabled()?"false":"true",null)}},toggleVisibility:function(b){var a=this._vm.getItem(b);if(a){this._setInvisible(a,null,a.isVisible()?"true":"false",null)}},_showHide:function(d,c,b,a){return this._setInvisible(d,c,d.invisibleConditionName,b,a)},_setInvisible:function(f,d,c,b,a){var e=a||false;if(!e){e=this._evaluateConditionName(c,b)}if(f.bizRequired&&f.setRequired){if(e){f.setRequired(false)}else{if(f.isDisabled&&(!f.isDisabled())){f.setRequired(true)}}}if(f.show&&f.hide){if(e){f.hide()}else{f.show()}}else{if(d){if(e){d.hideMember(f)}else{d.showMember(f)}}}return e},setInvisible:function(d,b){var c=this._vm.getItem(d);if(c){var a=this.gather(false);this._setInvisible(c,null,b,a)}}});isc.ClassFactory.defineClass("BizButton","IButton");isc.BizButton.addMethods({initWidget:function(){this.autoFit=!(arguments[0].width||arguments[0].height);this.hasDisabledicon=false;if(this.displayName){this.title=this.displayName}if(this.tooltip){this.canHover=true;this.getHoverHTML=function(){return this.tooltip}}if(this.icon){this.showDisabledIcon=this.hasDisabledIcon}this.action=function(){if(this._view&&this._view._blurry){this._view._blurry=this;return}if(this.confirm){var a=this;isc.ask(this.confirm,function(b){if(b){a._action()}},{title:"Confirm"})}else{this._action()}},this._action=function(){var g=this.validate;if(g===undefined){g=true}if(this.type=="O"){this._view.saveInstance(g,this.actionName)}else{if(this.type=="S"){this._view.saveInstance(g,this.actionName,function(){isc.BizUtil.growl([{severity:"info",summary:"Saved",detail:"Changes Saved"}],3000)})}else{if(this.type=="A"){}else{if(this.type=="Z"){var k=this._view.gather(false);var j=k._apply;var c=k._changed;if(j||c||this._view._vm.valuesHaveChanged()){this._view.saveInstance(g,this.actionName)}else{var h=isc.WindowStack.getOpener();isc.WindowStack.popoff(this._view._saved);h._source=null}}else{if(this.type=="C"){var e=this;var c=this._view.gather(false)._changed;var h=isc.WindowStack.getOpener();if(c||this._view._vm.valuesHaveChanged()){isc.ask("There are unsaved changes in the "+this._view._singular+".  Do you wish to cancel?",function(m){if(m){isc.WindowStack.popoff(e._view._saved);h._source=null}},{title:"Discard Unsaved Changes?"})}else{isc.WindowStack.popoff(e._view._saved);h._source=null}}else{if(this.type=="D"){this._view.deleteInstance(g)}else{if(this.type=="R"){var i=this._view.gather(false).bizId;var f=this._view._b;f=f.substring(f.lastIndexOf(".")+1,f.lastIndexOf("ElementById"));var h=isc.WindowStack.getOpener();if(h){var l=h._grids[f];if(l){for(var d in l){var a=l[d];a.remove(i);if(a._view){if(a.bizRemoved){a.bizRemoved()}}}}h._vm.setValue("_apply",true)}isc.WindowStack.popoff(false)}else{if(this.type=="P"){isc.ReportDialog.popupReport(this._view,this.params)}else{if(this.type=="X"){var k=this._view.gather(false);if(k){var e=this;this._view.saveInstance(g,null,function(){window.location.assign("bizexport.xls?_n="+e.actionName+"&_doc="+e._view._mod+"."+e._view._doc+"&_c="+k._c+"&_ctim="+new Date().getTime())})}}else{if(this.type=="I"){var k=this._view.gather(false);if(k){var e=this;this._view.saveInstance(g,null,function(){var m="bizImport.xhtml?_a="+e.actionName+"&_c="+k._c;if(e._view._b){m+="&_b="+e._view._b.replaceAll("_",".")}isc.WindowStack.popup(null,"BizPort Import",true,[isc.HTMLPane.create({contentsType:"page",contents:"Loading Page...",contentsURL:m})])})}}else{if(this.type=="L"){this._view.doAction(this.actionName,g)}else{if(this.type=="U"){var k=this._view.gather(false);if(k){var e=this;this._view.saveInstance(g,null,function(){var m="fileUpload.xhtml?_a="+e.actionName+"&_c="+k._c;if(e._view._b){m+="&_b="+e._view._b.replaceAll("_",".")}isc.WindowStack.popup(null,"Upload",true,[isc.HTMLPane.create({contentsType:"page",contents:"Loading Page...",contentsURL:m})])})}}else{if(this.type=="M"){}else{if(this.type=="V"){var b={_mod:this._view._mod,_doc:this._view._doc};isc.ReportDialog.popupReport(this._view,b)}else{this._view.doAction(this.actionName,g)}}}}}}}}}}}}}}};this.Super("initWidget",arguments)}});isc.ClassFactory.defineClass("BizVBox","VLayout");isc.BizVBox.addMethods({initWidget:function(){this.contained=[];this.Super("initWidget",arguments)},addContained:function(a){this.contained.add(a);this.addMember(a)}});isc.ClassFactory.defineClass("BizHBox","HLayout");isc.BizHBox.addMethods({initWidget:function(){this.contained=[];this.Super("initWidget",arguments)},addContained:function(a){this.contained.add(a);this.addMember(a)}});isc.ClassFactory.defineClass("BizTabPane","TabSet");isc.BizTabPane.addMethods({initWidget:function(){this.tabs=[];this.bizTabs=[];this.destroyPanes=false;if(this.tabBarThickness){}else{this.tabBarThickness=30}this.Super("initWidget",arguments)},tabSelected:function(d,b,a,c){if(this._view.isVisible()){this._view.delayCall("refreshListGrids",[false,false,this._view.gather(false)],0)}},addBizTab:function(a){this.bizTabs.add(a);this.addTab({name:a.name,title:a.title,icon:a.icon,prompt:a.prompt,pane:a.pane,disabledConditionName:a.disabledConditionName,invisibleConditionName:a.invisibleConditionName,selectedConditionName:a.selectedConditionName})},showMember:function(c){var d=this.getTabNumber(c.name);if(d<0){var b=0;var a=parseInt(c.name);a--;while(a>=0){d=this.getTabNumber(""+a);if(d>=0){b=d+1;break}a--}this.addTab({name:c.name,title:c.title,pane:c.pane,disabledConditionName:c.disabledConditionName,invisibleConditionName:c.invisibleConditionName,selectedConditionName:c.selectedConditionName},b)}},hideMember:function(a){if(this.getTabNumber(a.name)>=0){this.removeTab(a.name)}}});isc.ClassFactory.defineClass("BizListMembership","HLayout");isc.BizListMembership.addMethods({initWidget:function(a){this.membersMargin=10;this.height="100%";var c=this;this._candidateList=isc.ListGrid.create({width:"100%",height:"100%",minHeight:100,canDragRecordsOut:true,canAcceptDroppedRecords:true,dragDataAction:"move",recordDrop:function(g,d,f,e){this.Super("recordDrop",arguments);c._view._vm.setValue("_changed",true);c._view._vm.setValue("_apply",true);c.changed()},alternateRecordStyles:true,autoFetchData:false,leaveScrollbarGap:false,showHeaderContextMenu:false,fields:[{name:"bizKey",title:(this.candidatesHeading?this.candidatesHeading:"Candidates")}]});this._memberList=isc.ListGrid.create({width:"100%",height:"100%",minHeight:100,canDragRecordsOut:true,canAcceptDroppedRecords:true,dragDataAction:"move",canReorderRecords:a._ordinal?true:false,recordDrop:function(g,d,f,e){this.Super("recordDrop",arguments);if(e==this){this.reorderData()}c._view._vm.setValue("_changed",true);c._view._vm.setValue("_apply",true);c.changed()},reorderData:function(){if(a._ordinal){var f=this.getData();for(var e=0,d=f.length;e<d;e++){f[e][a._ordinal]=e+1}}},alternateRecordStyles:true,autoFetchData:false,leaveScrollbarGap:false,showHeaderContextMenu:false,fields:[{name:"bizKey",title:(this.membersHeading?this.membersHeading:"Members")}]});this.members=[this._candidateList,isc.VLayout.create({layoutAlign:"center",membersMargin:10,height:75,members:[isc.IButton.create({icon:"icons/memberAssign.png",iconWidth:24,iconHeight:24,iconAlign:"center",showText:false,width:32,height:32,click:function(){c._memberList.transferSelectedData(c._candidateList);c._view._vm.setValue("_changed",true);c._view._vm.setValue("_apply",true);c.changed()},canHover:true,getHoverHTML:function(){return"Add the selected candidates."}}),isc.IButton.create({icon:"icons/memberUnassign.png",iconWidth:24,iconHeight:24,iconAlign:"center",showText:false,width:32,height:32,click:function(){c._candidateList.transferSelectedData(c._memberList);c._view._vm.setValue("_changed",true);c._view._vm.setValue("_apply",true);c.changed()},canHover:true,getHoverHTML:function(){return"Remove the selected members."}})]}),this._memberList];this.Super("initWidget",arguments);var b=this._view._grids[this._b];if(b){}else{b={};this._view._grids[this._b]=b}b[this.getID()]=this},setData:function(b,a){this._candidateList.setData(b);this._memberList.setData(a)},changed:function(){}});isc.ClassFactory.defineClass("BizComparison","HLayout");isc.BizComparison.addMethods({initWidget:function(){this.canDragResize=true;this.resizeFrom=["L","R"];var c=this;this._comparisonTree=isc.TreeGrid.create({width:"50%",height:"100%",fields:[{name:"bizKey",title:"Document"},{name:"relationship",title:"Relationship"}],data:isc.Tree.create({modelType:"parent",idField:"bizId",parentIdField:"parent",data:[]}),selectionUpdated:function(e,d){if(e){c.setFormFields(e.properties)}},showOpenIcons:false,showDropIcons:false,showResizeBar:true});var a=function(f){if(f.type!="boolean"){if(this.diff_match_patch){var e=f;var h=f;if(f.name.startsWith("_old_")){e=this.getItem(f.name.substring(5))}else{h=this.getItem("_old_"+f.name)}var d=e.getDisplayValue();if(d){if(d.startsWith("<")){d=""}}else{d=""}var g=h.getDisplayValue();if(g){if(g.startsWith("<")){g=""}}else{g=""}var i=this.diff_match_patch.diff_main(g,d,false);this.diff_match_patch.diff_cleanupEfficiency(i);return this.diff_match_patch.diff_prettyHtml(i)}}return null};this._comparisonForm=isc.PropertySheet.create({width:"100%",height:"100%",numCols:c.editable?5:4,colWidths:c.editable?[150,"*",50,"*",30]:[150,"*","*",30],border:"1px solid #A7ABB4",titleHoverHTML:a,fields:[]});SKYVE.Util.loadJS("desktop/diff_match_patch.js?v="+SKYVE.Util.v,function(){c._comparisonForm.diff_match_patch=new diff_match_patch();c._comparisonForm.diff_match_patch.Diff_EditCost=4});this.members=[this._comparisonTree,isc.VLayout.create({overflow:"auto",members:[this._comparisonForm]})];this.Super("initWidget",arguments);var b=this._view._grids[this._b];if(b){}else{b={};this._view._grids[this._b]=b}b[this.getID()]=this},setData:function(a){this._comparisonTree.setData(isc.Tree.create({modelType:"parent",idField:"bizId",parentIdField:"parent",data:a}));this.setFormFields([])},setFormFields:function(j){var k=this;var g=[{type:"blurb",align:"center",colSpan:1,defaultValue:"Property",startRow:false,endRow:false,cellStyle:"propSheetTitle"},{type:"blurb",align:"center",colSpan:1,defaultValue:"New",startRow:false,endRow:false,cellStyle:"propSheetTitle"}];if(this.editable){g.add({title:"<<-",type:"button",click:"for (var i = 5; i < form.getFields().length - 4; i += 4) {var old = form.getField(i + 2).getValue();form.getField(i).setValue(old ? old : '')}",startRow:false,endRow:false,align:"center",cellStyle:"propSheetValue",titleStyle:null,textBoxStyle:null})}g.add({type:"blurb",align:"center",colSpan:1,defaultValue:"Old",startRow:false,endRow:false,cellStyle:"propSheetTitle"});g.add({type:"blurb",align:"center",colSpan:1,defaultValue:"Diff",startRow:false,endRow:false,cellStyle:"propSheetTitle"});for(var e=0;e<j.length;e++){var a=j[e].name;var n=j[e].title;var l=j[e].type;var b=j[e].editorType;var c=j[e].length;var d=j[e].valueMap;var h=j[e].required;var f=j[e].allowEmptyValue;var m={name:a,title:n,showTitle:true,type:l,width:"*",startRow:true,endRow:false,canEdit:this.editable,defaultValue:j[e].newValue};var o={name:"_old_"+a,showTitle:false,type:l,width:"*",startRow:false,endRow:false,canEdit:false,defaultValue:j[e].oldValue};if((l=="richText")||(b=="richText")){m.controlGroups=[];m.colSpan=1;o.controlGroups=[];o.colSpan=1}if(b){m.editorType=b;o.editorType=b}if(c){m.length=c;o.length=c}if(d){m.valueMap=d;o.valueMap=d}if(h){m.required=h}if(f){m.allowEmptyValue=f}g.add(m);if(this.editable){g.add({title:"<-",type:"button",click:"var old = form.getField('_old_"+a+"').getValue(); form.getField('"+a+"').setValue(old ? old : '')",align:"center",startRow:false,endRow:false,cellStyle:"propSheetValue",titleStyle:null,textBoxStyle:null})}g.add(o);g.add({title:"...",type:"button",click:"isc.say(form.titleHoverHTML(form.getField('"+a+"')),null,{title:'Diff'})",align:"center",startRow:false,endRow:false,cellStyle:"propSheetValue",titleStyle:null,textBoxStyle:null})}if(this.editable){g.add({type:"spacer",colSpan:5,cellStyle:null,titleStyle:null,textBoxStyle:null});g.add({title:"Apply Changes",type:"button",colSpan:4,startRow:false,endRow:true,align:"right",cellStyle:null,titleStyle:null,textBoxStyle:null,click:function(t,s){var p=t.getValues();var r=k._comparisonTree.getSelectedRecord().properties;for(var q=0;q<r.length;q++){var u=r[q];u.newValue=p[u.name]}isc.showPrompt('<span style="font-size:medium">Changes Applied</span>');isc.Timer.setTimeout("isc.clearPrompt()",500)}});g.add({type:"spacer",colSpan:5,cellStyle:null,titleStyle:null,textBoxStyle:null})}this._comparisonForm.setFields(g);this._comparisonForm.clearValues()},getData:function(){var a=this._getData(this._comparisonTree.getData().getRoot().children[0]);delete a._b;delete a._t;return a},_getData:function(h){var j={bizId:h.bizId,_b:h._b,_t:h._t};var f=h.properties;for(var e=0;e<f.length;e++){j[f[e].name]=f[e].newValue}var c=h.children;if(c){for(var e=0;e<c.length;e++){var d=this._getData(c[e]);var g=d._b;var a=d._t;delete d._b;delete d._t;var b=j[g];if(b){if(!isc.isAn.Array(b)){b=[b]}b.add(d)}else{if(a=="A"){j[g]=d}else{j[g]=[d]}}}}return j}});isc.ClassFactory.defineClass("BizDynamicImage","VLayout");isc.BizDynamicImage.addMethods({initWidget:function(){this.overflow="hidden";this.wZoom=100;this.hZoom=100;if(this.parameters){}this.members=[];var a=this;this.mouseWheelTimer=null;this.contextMenu=isc.Menu.create({showShadow:true,shadowDepth:10,data:[{title:"Size",icon:"icons/mag.png",submenu:[{title:"50%",click:function(){a._zoom(50)}},{title:"75%",click:function(){a._zoom(75)}},{title:"100%",click:function(){a._zoom(100)}},{title:"125%",click:function(){a._zoom(125)}},{title:"150%",click:function(){a._zoom(150)}},{title:"175%",click:function(){a._zoom(175)}},{title:"200%",click:function(){a._zoom(200)}},{title:"300%",click:function(){a._zoom(300)}},{title:"400%",click:function(){a._zoom(400)}},{title:"500%",click:function(){a._zoom(500)}}]},{title:"Enlarge",icon:"icons/magIn.png",click:function(){a._zoom(a.wZoom+10)}},{title:"Reduce",icon:"icons/magOut.png",click:function(){a._zoom(a.wZoom-10)}},{isSeparator:true},{title:"Open",icon:"zoom.gif",click:function(){a._open()}},{isSeparator:true},{title:"Refresh",icon:"refresh.png",click:function(){a.rerender()}}]});this.Super("initWidget",arguments)},_zoom:function(b,a){if(b>0){this.wZoom=b;this.hZoom=b;if(a){if(this.mouseWheelTimer){isc.Timer.clear(this.mouseWheelTimer)}this.mouseWheelTimer=isc.Timer.setTimeout(this.ID+".rerender()",250)}else{this.rerender()}}},_open:function(){var a=isc.BizDynamicImage.create({name:this.name,moduleDotDocument:this.moduleDotDocument,format:this.format,_view:this._view});isc.WindowStack.popup(null,"Image",true,[a]);a.rerender()},resized:function(){this.rerender()},rerender:function(){var j=this._view._vm.getValue("_c");if(j){}else{return}this.mouseWheelTimer=null;if(this.members&&(this.members.length==1)){this.removeMember(0);if(this._img){this._img.destroy()}}var a=this._view._b;var g=this._view._vm.getValue("bizId");var d=this.imageWidth?this.imageWidth:(this.getVisibleWidth()-20);var e=this.imageHeight?this.imageHeight:(this.getVisibleHeight()-20);var f=this;var i="dynamic."+this.format+"?_doc="+this.moduleDotDocument+"&_n="+this.name;if(this.imageWidth){i+="&_w="+this.imageWidth}if(this.imageHeight){i+="&_h="+this.imageHeight}i+="&_w="+d+"&_h="+e+"&_wz="+this.wZoom+"&_hz="+this.hZoom;if(j){i+="&_c="+j}if(a){i+="&_b="+a.replaceAll("_",".")}if(g){i+="&bizId="+g}i+="&_ts="+new Date().getTime();this._img=isc.Img.create({width:"100%",height:"100%",overflow:"hidden",imageWidth:Math.round(d*this.wZoom/100),imageHeight:Math.round(e*this.hZoom/100),imageType:"center",canDrag:true,cursor:"all-scroll",dragAppearance:"none",dragStart:function(){this.startScrollLeft=this.getScrollLeft();this.startScrollTop=this.getScrollTop()},dragMove:function(){this.scrollTo(this.startScrollLeft-isc.Event.lastEvent.x+isc.Event.mouseDownEvent.x,this.startScrollTop-isc.Event.lastEvent.y+isc.Event.mouseDownEvent.y)},mouseWheel:function(){var b=isc.EventHandler.getWheelDelta();f._zoom(Math.round(f.wZoom-(b*10)),true);return false},doubleClick:function(){f._open()},src:i});if(this.members){this.addMember(this._img)}}});isc.ClassFactory.defineClass("BizImage","Img");isc.BizImage.addMethods({initWidget:function(){this.imageType="stretch";this.src="resources?_n="+this.file+"&_doc="+this.modoc+"&_b=null";this.Super("initWidget",arguments)}});isc.ClassFactory.defineClass("BizLabel","Label");isc.BizLabel.addMethods({initWidget:function(){this.autoFit=!(arguments[0].width||arguments[0].height);if(this.value){this.setContents(this.value)}if(this.textAlign){this.setAlign(this.textAlign)}this.Super("initWidget",arguments)}});isc.ClassFactory.defineClass("BizProgressBar","ProgressBar");isc.BizUtil.addClassProperties({headerTemplate:null,init:function(h,d,c,b){isc.BizUtil.headerTemplate=h;isc.HLayout.create({ID:"body",autoDraw:true,width:"100%",height:"100%",backgroundColor:"whitesmoke",padding:10,members:[isc.VLayout.create({ID:"navigation",width:"30%",showResizeBar:true,backgroundColor:"white",border:"1px solid #c0c0c0",showShadow:true,shadowSoftness:10,shadowOffset:0,members:[isc.Img.create({imageType:"center",src:d,overflow:"clip-h"}),isc.SectionStack.create({ID:"adminStack",width:"100%",visibilityMode:"mutex",animateSections:true,overflow:"hidden",headerHeight:20})]}),isc.VLayout.create({ID:"details",width:"100%",height:"100%",backgroundColor:"whitesmoke",border:"1px solid #c0c0c0",showShadow:true,shadowSoftness:10,shadowOffset:0})]});for(var e=0,a=c.length;e<a;e++){var f=c[e];var g=isc.TreeGrid.create({ID:f.name+"Tree",showHeader:false,showOpenIcons:false,showDropIcons:false,showConnectors:true,showRollOver:false,leaveScrollbarGap:false,nodeIcon:null,folderIcon:null,closedIconSuffix:"",canDragRecordsOut:true,dragDataAction:"copy",data:isc.Tree.create({modelType:"children",nameProperty:"desc",childrenProperty:"sub",root:f.root}),leafClick:function(k,i,j){if(i.ref=="link"){window.location=i.name}else{if(i.ref=="edit"){if(isc.BizUtil._currentView==isc.ListView.contents){details.hideMember(isc.ListView.contents)}else{if(isc.BizUtil._currentView){if(details.hasMember(isc.BizUtil._currentView)){details.hideMember(isc.BizUtil._currentView)}isc.BizUtil.relinquishEditView(isc.BizUtil._currentView)}}isc.BizUtil.getEditView(k.data.root.name,i.name,function(l){details.addMember(l);isc.BizUtil._currentView=l;l.newInstance()})}else{if(isc.BizUtil._currentView!=isc.ListView.contents){if(isc.BizUtil._currentView){if(details.hasMember(isc.BizUtil._currentView)){details.hideMember(isc.BizUtil._currentView)}isc.BizUtil.relinquishEditView(isc.BizUtil._currentView)}isc.BizUtil._currentView=isc.ListView.contents;details.showMember(isc.ListView.contents)}if(i.ref=="grid"){isc.ListView.setGridDataSource(k.data.root.name+"_"+i.name,i.config)}else{if(i.ref=="cal"){isc.ListView.setCalendarDataSource(k.data.root.name+"_"+i.name,i.config)}else{if(i.ref=="tree"){isc.ListView.setTreeDataSource(k.data.root.name+"_"+i.name,i.config)}else{if(i.ref=="map"){isc.ListView.setMapDataSource(k.data.root.name+"_"+i.name,i.config)}else{alert("Menu ref of "+i.ref+"is unknown")}}}}}}}});adminStack.addSection({title:f.title,expanded:f.open,items:[g]});g.getData().openAll()}for(var e=0,a=b.length;e<a;e++){var f=b[e];f.fields.add({name:"operator",type:"text",hidden:true});f.fields.add({name:"criteria",type:"text",hidden:true});f.fields.add({name:"bizId",primaryKey:true,hidden:true});f.fields.add({name:"bizLock",hidden:true});f.fields.addAt({name:"bizTagged",title:"Tag",type:"boolean",validOperators:["equals"]},0);f.fields.addAt({name:"bizFlagComment",title:"Flag"},1);isc.RestDataSource.create({ID:f.ID,dataFormat:"json",dataURL:"smartlist",operationBindings:[{operationType:"fetch",dataProtocol:"postParams"},{operationType:"update",dataProtocol:"postParams"},{operationType:"add",dataProtocol:"postParams"},{operationType:"remove",dataProtocol:"postParams"}],criteriaPolicy:"dropOnChange",title:f.title,modoc:f.modoc,icon:f.icon,fontIcon:f.fontIcon,aggregate:f.aggregate,canCreate:f.canCreate,canUpdate:f.canUpdate,canDelete:f.canDelete,cellHeight:f.cellHeight,fields:f.fields})}isc.BizUtil._currentView=isc.ListView.contents;details.addMember(isc.ListView.contents);details.hideMember(isc.ListView.contents);isc.RestDataSource.create({ID:"textSearch",dataFormat:"json",dataURL:"smartsearch",criteriaPolicy:"dropOnChange",fields:[{name:"icon",title:"Icon"},{name:"doc",title:"Document"},{name:"bizKey",title:"Desciption"},{name:"excerpt",title:"Excerpt"},{name:"score",title:"Score (%)",type:"integer"},{name:"data",type:"link",title:"Data",target:"_self"},{name:"content",type:"link",title:"Content",target:"_blank"}]});isc.DynamicForm.create({ID:"textSearchForm",margin:2,width:500,height:40,numCols:3,colWidths:[300,100,100],items:[{name:"query",title:"Type and press search or enter",type:"text",keyPress:function(l,k,j,i){if((j=="Enter")&&k.validate(false)){l.form.doSearch()}},required:true,validators:[{clientOnly:true,type:"lengthRange",min:4,errorMessage:"At least 4 characters are required for a search"}]},{name:"searchBtn",startRow:false,title:"Search",type:"button",accessKey:"Enter",click:function(){this.form.doSearch()}},{name:"message",type:"blurb",startRow:true,colSpan:3}],doSearch:function(){if(this.validate()){var i=this.getItem("message");i.setValue("");textSearchResults.filterData(textSearchForm.getValuesAsCriteria())}}});isc.ListGrid.create({ID:"textSearchResults",width:"100%",height:"100%",alternateRecordStyles:true,dataSource:"textSearch",dataFetchMode:"basic",wrapCells:true,fixedRecordHeights:false,canEdit:false,canFreezeFields:false,canGroupBy:false,canPickFields:false,canSort:false,fields:[{name:"icon",align:"center",width:30},{name:"doc",width:"15%"},{name:"bizKey",width:"30%"},{name:"excerpt",width:"55%"},{name:"score",width:75},{name:"data",width:40,align:"center",linkText:"Data"},{name:"content",width:60,align:"center",linkText:"Content"}],dataProperties:{transformData:function(k,m){if(m.status>=0){var j=k.pop();var l=textSearchForm.getItem("message");var i="Query took "+j.time+" seconds.";if(j.suggestion){i+="  Did you mean <a href=\"#\" onclick=\"var q = textSearchForm.getItem('query'); q.setValue('"+j.suggestion+"'); q.focusInItem(); return false;\">"+j.suggestion+"</a>"}l.setValue(i)}}}})},popupSearch:function(){isc.WindowStack.popup(null,"Text Search",true,[textSearchForm,textSearchResults]);textSearchForm.focusInItem("query");textSearchForm.clearValues()},showPortal:function(){if(isc.BizUtil._currentView!=isc.ListView.contents){if(isc.BizUtil._currentView){if(details.hasMember(isc.BizUtil._currentView)){details.hideMember(isc.BizUtil._currentView)}isc.BizUtil.relinquishEditView(isc.BizUtil._currentView)}isc.BizUtil._currentView=isc.ListView.contents;details.showMember(isc.ListView.contents)}isc.ListView.showPortal()},showHelp:function(a){if(a){}else{if(isc.BizUtil._currentView==isc.ListView.contents){a="https://skyvers.github.io/skyve-user-guide/"}else{a="https://skyvers.github.io/skyve-user-guide/"}}isc.BizUtil.popupFrame(a,"Skyve Help",1024,768)}});