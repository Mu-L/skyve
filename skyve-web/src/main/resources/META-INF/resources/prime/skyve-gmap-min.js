SKYVE.BizMap=function(){var a={};var b=function(d,c){$.get(d.url,function(e){SKYVE.Util.scatterGMap(d,e,true,false)})};return{create:function(e){var d={zoom:4,center:new google.maps.LatLng(-26,133.5),mapTypeId:google.maps.MapTypeId.ROADMAP};var f=a[e.elementId];if(f){if(f.webmap){d.zoom=f.webmap.getZoom();d.center=f.webmap.getCenter();d.mapTypeId=f.webmap.getMapTypeId()}}else{f={_objects:{},_overlays:[],click:function(g,h){SKYVE.BizMap.click(this,g,h)}};a[e.elementId]=f}f.infoWindow=new google.maps.InfoWindow({content:""});f.webmap=new google.maps.Map(document.getElementById(e.elementId),d);var c=SKYVE.Util.CONTEXT_URL+"map?";if(e.modelName){c+="_c="+e._c+"&_m="+e.modelName}else{if(e.queryName){c+="_mod="+e.moduleName+"&_q="+e.queryName+"&_geo="+e.geometryBinding}}f.url=c;b(f,true);return f},get:function(c){return a[c]},click:function(j,i,d){var f=i.infoMarkup;f+='<br/><br/><input type="button" value="Zoom" onclick="window.location=\''+SKYVE.Util.CONTEXT_URL;f+="?m="+i.mod+"&d="+i.doc+"&i="+i.bizId+"'\"/>";if(i.getPosition){j.infoWindow.open(this.webmap,i);j.infoWindow.setContent(f)}else{if(i.getPath){var c=new google.maps.LatLngBounds();var m=i.getPath();for(var h=0,e=m.getLength();h<e;h++){c.extend(m.getAt(h))}var g=c.getNorthEast();var l=c.getSouthWest();j.infoWindow.setPosition(d.latLng);j.infoWindow.open(j.webmap);j.infoWindow.setContent(f)}}}}}();SKYVE.BizMapPicker=function(){var a={};return{create:function(c){var b={zoom:4,center:new google.maps.LatLng(-26,133.5),mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU}};var e=a[c.elementId];if(e){if(e.webmap){b.zoom=e.webmap.getZoom();b.center=e.webmap.getCenter();b.mapTypeId=e.webmap.getMapTypeId()}}else{e={_objects:{},_overlays:[]};a[c.elementId]=e}e.webmap=new google.maps.Map(document.getElementById(c.elementId),b);if(!c.disabled){var d={editable:true,strokeColor:"#990000",fillColor:"#EEFFCC",fillOpacity:0.6};e.webmap.drawingManager=new google.maps.drawing.DrawingManager({drawingControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM,defaults:d,drawingModes:SKYVE.Util.gmapDrawingModes(c.drawingTools)},markerOptions:d,polygonOptions:d,polylineOptions:d,rectangleOptions:d});e.webmap.drawingManager.setMap(e.webmap);google.maps.event.addListener(e.webmap.drawingManager,"overlaycomplete",function(h){SKYVE.Util.clearGMap(e);this.setDrawingMode(null);e._overlays.push(h.overlay);var g=new Wkt.Wkt();g.fromObject(h.overlay);var f=g.write();$("#"+c.elementId+"_hidden").val(f)})}SKYVE.Util.clearGMap(e);SKYVE.Util.scatterGMapValue(e,$("#"+c.elementId+"_hidden").val())}}}();